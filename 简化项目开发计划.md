# 团队知识库管理工具 - 简化开发计划

## 项目背景
根据`项目题目.md`要求，开发一个简单的web应用，实现：
- **核心功能**: 上传、搜索和标签化文档
- **协作功能**: 团队共享文档和知识
- **管理功能**: 用户管理和浏览权限分配  
- **技术架构**: 三层架构（WebApp + WebService + SQLite）

## 项目现状
- ✅ 项目结构已建立（Project/目录完整创建）
- ✅ 完整的技术文档已完成（需求分析、系统设计、数据库设计、API设计）
- ✅ 前端代码目录结构已建立，包含所有配置文件
- ✅ 后端代码目录结构已建立，包含所有配置文件
- ✅ SQLite数据库已创建并初始化（knowledge_base.db 116KB）
- ✅ 工作空间配置完成，支持并行开发
- ❌ 业务逻辑代码待实现

## 开发阶段 (共18个核心任务)

### 🏗️ 阶段1: 基础环境搭建 (任务1-5) ✅ 75% 完成

**目标**: 基于现有设计文档，快速搭建可运行的三层架构

1. **实现后端基础框架**
   - **文件位置**: `Project/backend/src/app.ts`
   - **Express服务器配置**:
     ```typescript
     // 端口配置: 8000 (来自开发环境配置文档)
     // 中间件: express.json(), cors(), helmet(), morgan('dev')
     // 路由前缀: '/api/v1'
     ```
   - **统一响应格式** (`src/utils/response.ts`):
     ```typescript
     { code: number, message: string, data?: any, timestamp: string }
     ```
   - **全局错误处理中间件** (`src/middleware/errorHandler.ts`)
   - **环境变量配置** (`.env.development`):
     ```bash
     NODE_ENV=development
     PORT=8000
     JWT_SECRET=your-jwt-secret-key
     DB_PATH=./database/knowledge_base_dev.db
     UPLOAD_DIR=./uploads
     ```

2. **✅ SQLite数据库已完成**
   - **数据库文件**: `Project/database/knowledge_base.db` (116KB)
   - **表结构已创建**（基于数据库设计文档）:
     ```sql
     -- 7个核心表: users, roles, documents, tags, document_tags, permissions, system_configs
     -- 外键约束和索引已启用
     -- 预设数据已插入: 3个角色，管理员用户(admin/admin123)，8个基础标签
     -- WAL模式已启用，性能优化完成
     ```
   - **数据库连接类**: `src/database/connection.ts`
     ```typescript
     // 单例模式数据库连接管理
     // 健康检查和优化方法
     // 事务支持和备份功能
     ```
   - **初始化脚本**: `src/database/schema.sql` + `src/database/test.js`
   - **NPM命令**: `npm run db:init`, `npm run db:test`, `npm run db:reset`

3. **✅ 前端基础架构已建立**
   - **项目结构**: `Project/frontend/src/` (已创建完整目录结构)
     ```
     components/common/     # 通用组件目录已创建
     components/layout/     # 布局组件目录已创建
     pages/                # 页面组件目录已创建
     contexts/             # React上下文目录已创建
     hooks/                # 自定义Hook目录已创建
     services/api/         # API服务目录已创建
     types/                # TypeScript类型定义目录已创建
     utils/                # 工具函数目录已创建
     ```
   - **路由配置**: `src/router/index.tsx`
     ```typescript
     // React Router v6, 保护路由PrivateRoute组件
     // 路由: /login, /register, /dashboard, /documents, /tags, /users
     ```
   - **✅ Vite配置**: `vite.config.ts` (已配置开发服务器端口3000)
   - **✅ Axios基础**: 需要实现 `src/services/api/request.ts`
     ```typescript
     // baseURL: http://localhost:8000/api/v1
     // 请求拦截器: 添加JWT Token
     // 响应拦截器: 统一错误处理，Token过期自动刷新
     ```
   - **✅ Ant Design配置**: `package.json`中已包含依赖

4. **实现JWT认证体系**
   - **后端认证API**（基于API接口设计文档）:
     ```typescript
     // POST /api/v1/auth/register  - 用户注册
     // POST /api/v1/auth/login     - 用户登录
     // POST /api/v1/auth/refresh   - Token刷新
     // POST /api/v1/auth/logout    - 用户登出
     ```
   - **JWT工具类**: `src/utils/jwt.ts`
     ```typescript
     // JWT_SECRET配置，过期时间2小时
     // 支持Token刷新机制
     ```
   - **认证中间件**: `src/middleware/auth.ts`
     ```typescript
     // 验证Bearer Token，解析用户信息
     // 权限验证装饰器
     ```
   - **前端认证管理**:
     ```typescript
     // AuthContext: 全局认证状态管理
     // useAuth Hook: 登录、登出、获取用户信息
     // Token存储: localStorage，自动刷新
     ```
   - **登录/注册页面**: `src/pages/auth/`
     ```typescript
     // LoginPage.tsx: 用户名/邮箱登录，表单验证
     // RegisterPage.tsx: 用户注册，邮箱验证
     // Ant Design Form组件，响应式布局
     ```

5. **配置开发环境**
   - **✅ 工作空间配置**: `Project/package.json`
     ```json
     {
       "scripts": {
         "dev": "concurrently \"npm run dev:backend\" \"npm run dev:frontend\"",
         "dev:backend": "cd backend && npm run dev",
         "dev:frontend": "cd frontend && npm run dev",
         "build": "npm run build:frontend && npm run build:backend",
         "db:init": "cd backend && npm run db:init",
         "db:test": "cd backend && npm run db:test",
         "db:reset": "cd backend && npm run db:reset"
       },
       "workspaces": ["frontend", "backend"]
     }
     ```
   - **✅ 一键启动脚本**: `Project/scripts/dev.sh` + `Project/scripts/build.sh`
     ```bash
     #!/bin/bash
     # 检查依赖安装，初始化数据库，启动开发服务器
     # 前端: http://localhost:3000, 后端: http://localhost:8000
     # 可执行权限已设置
     ```
   - **✅ 代码规范配置**:
     ```typescript
     // ESLint: @typescript-eslint/recommended (已配置)
     // Prettier: 统一代码格式化 (已配置)
     // TypeScript: 严格模式配置
     // 前后端独立配置文件已创建
     ```
   - **测试环境**: 基于测试计划文档配置
     ```json
     // Jest + Vitest单元测试
     // React Testing Library组件测试
     // Supertest API测试
     ```

### 📄 阶段2: 文档管理核心功能 (任务6-11) ⏳ 待开发

**目标**: 实现题目要求的文档上传、存储和管理功能

**✅ 基础设施**: 文件上传目录 (`backend/uploads/`) 已创建，multer依赖已配置

6. **实现文档上传API**
   - **API实现**: `POST /api/v1/documents`（基于API接口设计文档）
   - **中间件配置**: `src/middleware/upload.ts`
     ```typescript
     // multer配置: dest='./uploads/documents/'
     // 支持文件格式: PDF(.pdf), Word(.doc,.docx), Excel(.xls,.xlsx), 
     //               PowerPoint(.ppt,.pptx), 文本(.txt), 图片(.jpg,.png,.gif)
     // 文件大小限制: 100MB (104857600 bytes)
     // 文件名处理: 时间戳 + 随机数 + 原文件名
     ```
   - **文件存储逻辑**: `src/services/fileService.ts`
     ```typescript
     // MD5哈希防重复上传
     // 文件类型验证和安全检查
     // 文件元数据提取(文件大小、MIME类型)
     // 数据库记录入documents表
     ```
   - **请求格式**: `multipart/form-data`
     ```typescript
     // 字段: file(文件), title(标题), description(描述), tags(标签ID数组)
     // 响应: {code: 201, message: '上传成功', data: {documentId, fileName, fileSize}}
     ```

7. **实现文档CRUD接口**
   - **数据访问层**: `src/dao/documentDao.ts`
     ```typescript
     // getDocuments(): 列表查询，支持分页(page, pageSize)、排序(sortBy, sortOrder)
     // getDocumentById(): 文档详情，包含标签信息和创建者信息
     // updateDocument(): 更新文档信息(标题、描述、公开状态)
     // deleteDocument(): 软删除(status='deleted')
     // SQL优化: 索引使用，JOIN查询统计
     ```
   - **文档API接口**:
     ```typescript
     // GET /api/v1/documents?page=1&pageSize=20&sortBy=createdAt&sortOrder=desc
     // GET /api/v1/documents/{id} - 文档详情查看，浏览次数+1
     // PUT /api/v1/documents/{id} - 更新文档信息(仅创建者或admin)
     // DELETE /api/v1/documents/{id} - 删除文档(仅创建者或admin)
     ```
   - **权限验证中间件**: `src/middleware/permission.ts`
     ```typescript
     // checkDocumentOwner: 验证文档所有者或admin角色
     // checkDocumentAccess: 验证文档访问权限(is_public或创建者)
     ```
   - **统计功能**:
     ```typescript
     // 浏览次数(view_count): 获取文档详情时+1
     // 下载次数(download_count): 文件下载时+1
     ```

8. **创建文档管理前端页面**
   - **文档列表页面**: `src/pages/documents/DocumentList.tsx`
     ```typescript
     // Ant Design Table组件，列显示: 标题、文件类型、大小、上传时间、标签、操作
     // 排序功能: 按时间、文件大小排序
     // 筛选功能: 按文件类型、创建日期筛选
     // 分页组件: 默认20条/页，支持页码跳转
     ```
   - **文档上传组件**: `src/components/DocumentUpload.tsx`
     ```typescript
     // Ant Design Upload.Dragger拖拽上传
     // 上传进度显示和状态提示
     // 文件预览功能(图片类型)
     // 文件信息表单: 标题(必填)、描述(可选)、标签选择、公开设置
     // 上传成功后跳转到文档列表
     ```
   - **文档操作组件**: `src/components/DocumentActions.tsx`
     ```typescript
     // 操作按钮组: 查看、编辑、下载、删除
     // 权限控制: 仅创建者和admin可编辑/删除
     // 确认对话框: 删除操作需要二次确认
     ```
   - **文档详情页面**: `src/pages/documents/DocumentDetail.tsx`
     ```typescript
     // 文档基本信息展示: 标题、描述、文件信息、创建者、创建时间
     // 标签列表展示和编辑功能
     // 统计信息: 浏览次数、下载次数
     // 操作按钮: 下载、编辑、删除
     ```

9. **实现文档下载功能**
   - **下载API**: `GET /api/v1/documents/{id}/download`
     ```typescript
     // 权限验证: 文档是否公开或用户有权访问
     // 文件流传输: res.download()方法
     // Content-Disposition设置原始文件名
     // 下载计数: download_count + 1
     ```
   - **前端下载功能**: `src/services/downloadService.ts`
     ```typescript
     // Axios responseType: 'blob'
     // 下载进度显示(onDownloadProgress)
     // 错误处理和重试机制
     // 文件保存: URL.createObjectURL()
     ```
   - **下载组件**: `src/components/DownloadButton.tsx`
     ```typescript
     // Loading状态显示
     // 下载进度条
     // 下载失败提示和重试按钮
     ```

10. **实现基础权限系统**
    - **权限逻辑设计**:
      ```typescript
      // 文档权限: 创建者拥有全权限(查看、编辑、删除)
      // 公开文档: is_public=1，任何用户可查看和下载
      // 私有文档: is_public=0，仅创建者可访问
      // admin角色: 可管理所有文档
      ```
    - **权限中间件**: `src/middleware/permission.ts`
      ```typescript
      // requireAuth(): 要求用户登录
      // requireRole(['admin', 'editor']): 要求特定角色
      // checkDocumentAccess(): 文档访问权限验证
      ```
    - **前端权限管理**: `src/hooks/usePermission.ts`
      ```typescript
      // hasRole(role): 角色判断
      // canEditDocument(document): 文档编辑权限
      // canDeleteDocument(document): 文档删除权限
      ```

11. **完善文档操作体验**
    - **操作确认对话框**: `src/components/ConfirmDialog.tsx`
      ```typescript
      // Ant Design Modal.confirm
      // 删除确认: “确定要删除此文档吗？”
      // 危险操作高亮显示
      ```
    - **全局错误处理**: `src/utils/errorHandler.ts`
      ```typescript
      // Ant Design message组件显示错误
      // 错误类型: 网络错误、权限错误、服务器错误
      // 用户友好的错误提示信息
      ```
    - **文件上传的失败重试**:
      ```typescript
      // 最大3次重试机制
      // 重试间隔: 2s, 5s, 10s
      // 显示重试进度和剩余次数
      ```
    - **Loading状态和空数据展示**:
      ```typescript
      // Loading组件: Ant Design Spin
      // Empty组件: 无数据时的友好提示
      // Skeleton组件: 列表加载时的骨架屏
      ```

### 🏷️ 阶段3: 标签和搜索功能 (任务12-15) ⏳ 待开发

**目标**: 实现题目要求的文档标签化和搜索功能

**✅ 基础数据**: 8个预设标签已插入数据库，tags表和document_tags关联表已创建

12. **实现标签管理系统**
    - **标签DAO层**: `src/dao/tagDao.ts`
      ```typescript
      // createTag(): 创建标签，验证名称唯一性
      // getTags(): 获取标签列表，支持分页和排序
      // updateTag(): 更新标签名称、颜色、描述
      // deleteTag(): 检查是否有文档使用，删除或禁用
      // getTagUsageCount(): 统计标签使用次数
      ```
    - **标签API接口**: 基于API接口设计文档
      ```typescript
      // GET /api/v1/tags?page=1&pageSize=50&sortBy=name - 标签列表
      // POST /api/v1/tags - 创建标签 {name, color, description}
      // PUT /api/v1/tags/{id} - 更新标签(仅创建者或admin)
      // DELETE /api/v1/tags/{id} - 删除标签(仅创建者或admin)
      // GET /api/v1/tags/popular - 热门标签(按usage_count排序)
      ```
    - **标签管理页面**: `src/pages/tags/TagManagement.tsx`
      ```typescript
      // 标签列表: Ant Design Table，显示标签名、颜色、使用次数、创建时间
      // 标签创建: Modal + Form，标签名称验证，颜色选择器
      // 标签编辑: 在线编辑模式，实时保存
      // 标签删除: 检查关联文档，确认删除
      ```
    - **标签选择组件**: `src/components/TagSelector.tsx`
      ```typescript
      // Ant Design Select组件，支持多选
      // 标签颜色显示和名称搜索
      // 支持在线创建新标签
      ```

13. **实现文档标签关联**
    - **文档标签关联API**: `src/dao/documentTagDao.ts`
      ```typescript
      // addDocumentTags(): 批量添加文档标签关联
      // removeDocumentTags(): 批量移除文档标签关联
      // getDocumentTags(): 获取文档所有标签
      // updateDocumentTags(): 全量更新文档标签(删除旧的+添加新的)
      // 事务支持: 保证数据一致性
      ```
    - **文档上传时标签选择**:
      ```typescript
      // 在DocumentUpload组件中集成TagSelector
      // 上传表单包含标签选择字段
      // 上传成功后自动创建文档标签关联
      ```
    - **文档详情页标签编辑**:
      ```typescript
      // 文档详情页添加标签编辑功能
      // Tag组件显示现有标签，可点击移除
      // “+” 按钮添加新标签，弹出TagSelector
      ```
    - **文档列表中标签展示**:
      ```typescript
      // 文档列表表格添加标签列
      // 标签以Tag组件形式显示(颜色+名称)
      // 点击标签快速筛选相关文档
      ```

14. **实现搜索功能**
    - **搜索后端API**: `src/services/searchService.ts`
      ```typescript
      // 文档标题搜索: SELECT * FROM documents WHERE title LIKE '%keyword%'
      // 标签筛选搜索: JOIN document_tags + tags 表
      // 组合搜索: 标题关键词 + 标签筛选 + 文件类型筛选
      // 搜索结果排序: 按相关性、创建时间、文件大小排序
      // 分页支持: 默认20条/页
      ```
    - **搜索API接口**: 基于API接口设计文档
      ```typescript
      // GET /api/v1/search?q=keyword&tags=1,2,3&fileType=pdf&page=1&pageSize=20
      // 参数: q(关键词), tags(标签ID), fileType(文件类型), sortBy, sortOrder
      // 响应: {documents, total, page, pageSize, searchTime}
      ```
    - **搜索页面**: `src/pages/search/SearchPage.tsx`
      ```typescript
      // 搜索框: Ant Design Input.Search，支持回车搜索
      // 高级搜索: 折叠面板，标签选择、文件类型、日期范围
      // 搜索结果: 文档列表显示，高亮关键词
      // 搜索统计: 搜索耗时、结果数量显示
      ```
    - **搜索结果处理**:
      ```typescript
      // 关键词高亮: 在文档标题和描述中高亮匹配的关键词
      // 搜索历史: 本地存储最近搜索记录
      // 搜索建议: 根据热门标签和文档提供搜索建议
      ```

15. **优化搜索体验**
    - **搜索框自动完成**: `src/components/SearchInput.tsx`
      ```typescript
      // Ant Design AutoComplete组件
      // 输入关键词时显示匹配的文档标题
      // 显示历史搜索记录和热门搜索
      // 防抖动处理: 500ms延迟搜索
      ```
    - **搜索结果关键词高亮**: `src/utils/highlightText.ts`
      ```typescript
      // 使用dangerouslySetInnerHTML或mark标签高亮
      // 支持多个关键词同时高亮
      // XSS防护: 输入清理和转义
      ```
    - **常用标签快速筛选**: `src/components/QuickTagFilter.tsx`
      ```typescript
      // 热门标签显示: 按使用次数排序的前10个标签
      // 标签点击快速筛选
      // 已选标签状态显示和清除
      ```
    - **搜索无结果处理**:
      ```typescript
      // 友好的空状态提示: “未找到相关文档”
      // 搜索建议: “试试使用其他关键词或标签”
      // 相关标签推荐: 根据搜索关键词推荐相关标签
      ```

### 👥 阶段4: 团队协作和系统完善 (任务16-18) ⏳ 待开发

**目标**: 实现团队共享功能和系统整体优化

**✅ 基础权限**: 三角色权限体系已建立，permissions表已创建

16. **实现用户管理功能**
    - **用户管理后端API**: 基于`users表`和`user_roles表`
      ```typescript
      // GET /api/v1/users/me - 获取当前用户信息
      // PUT /api/v1/users/me - 更新个人信息(姓名、邮箱、头像)
      // PUT /api/v1/users/me/password - 修改密码(验证旧密码)
      // POST /api/v1/users/me/avatar - 上传头像(multer处理)
      ```
    - **管理员用户管理API**(仅admin角色):
      ```typescript
      // GET /api/v1/admin/users?page=1&pageSize=20 - 用户列表
      // POST /api/v1/admin/users/{id}/roles - 用户角色分配
      // PUT /api/v1/admin/users/{id}/status - 用户状态管理(is_active字段)
      // DELETE /api/v1/admin/users/{id} - 用户删除(软删除)
      ```
    - **角色权限管理**: 基于数据库设计文档中的roles表
      ```typescript
      // admin: 全部权限(用户管理、系统配置)
      // editor: 文档管理权限(上传、编辑、删除自己的文档)
      // viewer: 只读权限(查看公开文档、下载)
      ```
    - **用户管理前端页面**:
      ```typescript
      // 个人设置页: src/pages/user/Profile.tsx
      //   - 个人信息编辑(姓名、邮箱)
      //   - 头像上传(拖拽上传、裁剪功能)
      //   - 密码修改(安全验证)
      // 用户列表页: src/pages/admin/UserManagement.tsx(仅admin)
      //   - 用户列表(Table组件)、角色分配、状态管理
      //   - 批量操作(禁用/启用用户)
      ```

17. **实现文档共享机制**
    - **文档权限管理**: 基于`permissions表`实现细粒度权限
      ```typescript
      // 文档可见性设置: is_public字段(0=私有,1=公开)
      // 文档所有者: created_by字段，拥有全部权限
      // 公开文档: 任何用户可查看和下载
      // 私有文档: 仅所有者和特定的授权用户可访问
      ```
    - **文档权限管理API**:
      ```typescript
      // POST /api/v1/documents/{id}/permissions - 添加用户权限
      //   {userId, permission: 'read'|'write'|'admin'}
      // DELETE /api/v1/documents/{id}/permissions/{userId} - 移除用户权限
      // GET /api/v1/documents/{id}/permissions - 获取文档权限列表
      // PUT /api/v1/documents/{id}/public - 设置文档公开/私有状态
      ```
    - **文档分享功能**:
      ```typescript
      // 分享链接生成: 基于JWT的时效性分享链接
      // GET /api/v1/shared/{shareToken} - 通过分享链接访问文档
      // 分享设置: 有效期、访问密码、下载次数限制
      ```
    - **权限管理界面**: `src/pages/documents/DocumentPermissions.tsx`
      ```typescript
      // 用户选择器: 搜索用户名或邮箱
      // 权限设置: 只读/读写/管理权限
      // 权限列表: 显示已授权用户和权限级别
      // 分享链接: 生成、复制、管理分享链接
      ```
    - **团队文档展示**:
      ```typescript
      // 我的文档: 用户创建的文档
      // 共享给我的: 其他用户分享的文档
      // 公开文档: 所有公开可访问的文档
      ```

18. **系统集成测试和优化**
    - **端到端功能测试流程**: 基于测试计划文档
      ```typescript
      // 用户注册登录测试: 验证整个认证流程
      // 文档上传测试: 上传各种格式文件，验证存储和元数据
      // 标签管理测试: 创建标签、文档标签关联、标签搜索
      // 搜索功能测试: 关键词搜索、标签筛选、组合搜索
      // 文档共享测试: 权限设置、分享链接、访问控制
      ```
    - **界面响应式适配**: 基于Ant Design的Grid系统
      ```typescript
      // 支持断点: xs(<576px), sm(576px), md(768px), lg(992px), xl(1200px)
      // 移动端优化: 触摸操作、简化界面、横屏适配
      // 数据表自适应: 移动端卡片样式，桌面端表格样式
      ```
    - **性能优化实施**:
      ```typescript
      // 数据库查询优化: 添加索引(title, created_at, file_size)
      // 分页加载: 文档列表、搜索结果实现虚拟滚动
      // 图片懒加载: 使用Intersection Observer API
      // 文件上传优化: 分块上传、断点续传、压缩传输
      ```
    - **错误处理完善**:
      ```typescript
      // 全局异常捕获: ErrorBoundary组件包裹根组件
      // 网络请求重试: Axios自动重试机制(3次重试)
      // 用户友好提示: 错误消息本地化，提供解决建议
      // 日志记录: 前端错误日志上报到后端
      ```
    - **最终集成验证**:
      ```typescript
      // 功能完整性: 所有功能点都可正常使用
      // 数据一致性: 数据库和前端状态同步
      // 性能指标: 页面加载<3s，API响应<1s
      // 兼容性: Chrome/Safari/Firefox浏览器正常显示
      ```

## 📋 功能范围说明

### 核心功能实现（严格按题目要求）
- **文档管理**: 上传、查看、编辑、删除、下载文档 ⏳
- **搜索功能**: 按标题搜索、标签筛选、组合搜索 ⏳
- **标签系统**: 创建标签、文档标签化、标签管理 🔄 数据库已建
- **用户管理**: 用户注册、登录、角色管理 🔄 数据库已建
- **团队协作**: 文档共享、权限分配、团队访问 🔄 数据库已建
- **✅ 三层架构**: React前端 + Express后端 + SQLite数据库 (项目结构已完成)

### 技术实现特色
- ✅ 基于现有完整的设计文档快速开发
- ✅ 工作空间(Workspace)项目结构，支持一键启动
- ✅ TypeScript全栈类型安全 (配置文件已建)
- ✅ Ant Design企业级UI组件 (依赖已配置)
- 🔄 JWT认证和RBAC权限控制 (数据库结构已完成)

### ❌ 暂不实现的扩展功能
- 文档版本控制和历史记录
- 评论和协作编辑功能
- 文档全文内容搜索
- 复杂的多级权限体系
- 文档在线预览（PDF等）
- 系统监控和操作日志
- 文档导入导出批量操作
- 移动端APP适配

## 🎯 验收标准

### 功能验收清单
- [ ] **用户系统**: 用户注册、登录、JWT认证、角色管理
- [ ] **文档上传**: 支持多种格式文件上传（PDF/Word/Excel/PPT/TXT/图片）
- [ ] **文档管理**: 文档列表查看、详情展示、信息编辑、删除功能
- [ ] **标签系统**: 标签创建、编辑、删除，文档标签绑定和展示
- [ ] **搜索功能**: 按文档标题搜索、标签筛选、组合搜索
- [ ] **权限控制**: 文档公开/私有设置、团队访问权限
- [ ] **文档下载**: 安全的文件下载功能
- [ ] **用户界面**: 响应式设计、友好的交互体验

### 技术验收要求
- [ ] **架构合规**: 严格遵循三层架构（React + Express + SQLite）
- [ ] **API标准**: RESTful API设计，统一响应格式
- [ ] **代码质量**: TypeScript类型安全，ESLint/Prettier规范
- [ ] **安全性**: JWT认证、权限验证、输入验证、文件安全检查
- [ ] **性能**: 响应时间<3秒，支持文件分块上传
- [ ] **可维护性**: 清晰的目录结构，完善的错误处理

### 部署验收
- [ ] **开发环境**: `npm run dev`一键启动前后端
- [ ] **生产构建**: `npm run build`成功构建
- [ ] **数据库**: 自动创建表结构和初始数据
- [ ] **文档**: 提供简单的使用说明

## ⏱️ 开发计划

### 时间预估（基于已完成基础设施）
- **总工期**: 2-3周（基础设施已完成，专注业务逻辑开发）
- **阶段1**: 3天 (任务1-5) - 认证系统和API框架搭建
- **阶段2**: 6天 (任务6-11) - 文档管理功能
- **阶段3**: 4天 (任务12-15) - 标签搜索功能
- **阶段4**: 3天 (任务16-18) - 团队协作和优化

### 开发优势（新增完成项）
- ✅ **设计文档完整**: 需求分析、系统设计、数据库设计、API设计已完成
- ✅ **项目结构就绪**: 前后端目录结构和package.json已配置
- ✅ **数据库已创建**: SQLite数据库文件已生成，表结构和初始数据完整
- ✅ **工作空间配置**: npm workspaces + concurrently 并行开发环境
- ✅ **技术栈明确**: 无需技术选型，直接按既定方案实施
- ✅ **开发环境**: macOS 11.7.10 + Node.js 16+ 环境已就绪
- ✅ **构建工具**: TypeScript配置、ESLint/Prettier规范、构建脚本完整

## 🛠️ 技术栈配置

### 前端技术栈
- **框架**: React 18 + TypeScript + Vite
- **UI库**: Ant Design 5.9.0
- **路由**: React Router DOM 6.15.0
- **HTTP客户端**: Axios 1.5.0
- **状态管理**: React Context API

### 后端技术栈
- **运行时**: Node.js 16+ + TypeScript 5.2.2
- **框架**: Express 4.18.2
- **数据库**: better-sqlite3 8.7.0
- **认证**: jsonwebtoken 9.0.2 + bcryptjs 2.4.3
- **文件处理**: multer 1.4.5
- **安全**: helmet 7.0.0 + cors 2.8.5

### 开发工具
- **构建**: Vite + tsc
- **代码规范**: ESLint + Prettier
- **测试**: Jest + Vitest
- **进程管理**: concurrently (开发) + PM2 (生产)

## 🚀 启动指南

### 快速开始（✅ 当前可用命令）
```bash
# 1. 安装依赖（需要先执行）
npm install

# 2. ✅ 数据库已初始化（可重新初始化）
npm run db:init  # 重新创建数据库
npm run db:test  # 验证数据库状态

# 3. 启动开发服务器（需要先完成认证系统开发）
npm run dev

# 前端: http://localhost:3000 （需要开发UI）
# 后端: http://localhost:8000 （需要开发API）
```

### ✅ 已完成基础设施验证
```bash
# 验证数据库创建成功
ls -la database/  # 查看数据库文件 (116KB)
sqlite3 database/knowledge_base.db ".tables"  # 查看表结构
```

### 生产部署
```bash
# 构建项目
npm run build

# 启动生产服务
npm start
```

## ⚡ 开发执行细节补充

### 📁 文件路径和命名规范（已确认）
- **数据库文件**: `/Users/weichen/Documents/testClass/Project/database/knowledge_base.db`
- **上传文件目录**: `/Users/weichen/Documents/testClass/Project/backend/uploads/`
- **日志文件**: `/Users/weichen/Documents/testClass/Project/backend/logs/`
- **环境配置**: 前后端分别配置（前端端口3000，后端端口8000）
- **项目根目录**: `/Users/weichen/Documents/testClass/Project/`

### 🔧 关键技术实现要点（已完成基础部分）
- **✅ 数据库初始化**: 使用`backend/src/database/schema.sql`和SQLite CLI直接创建
- **文件上传**: 基于multer + 本地文件系统，支持MAX_FILE_SIZE=52428800（50MB）
- **JWT配置**: 需要配置环境变量JWT_SECRET，默认过期时间2小时
- **✅ 权限验证**: 基于roles表的admin/editor/viewer三角色设计（已创建）
- **搜索实现**: 使用SQLite的LIKE查询和JOIN操作，支持分页
- **✅ 项目结构**: 完整的monorepo工作空间结构已建立

### 📋 任务依赖关系
- **任务1-5**: 必须按顺序完成，为后续开发打基础
- **任务6-8**: 可并行开发，但需要任务7的API完成后才能测试任务8
- **任务12-13**: 标签管理必须先完成，再实现文档标签关联
- **任务16-17**: 用户管理是文档权限的前置条件

### 🎯 关键里程碑验证（更新状态）
- **✅ 基础搭建完成**: 项目结构、数据库、配置文件全部就绪
- **Week 1目标**: 实现认证系统，可通过`npm run dev`启动项目，访问登录页面
- **Week 2目标**: 可上传文档并在列表中查看
- **Week 3目标**: 可搜索文档和管理标签
- **Week 4目标**: 完整的权限控制和用户管理功能