# å›¢é˜ŸçŸ¥è¯†åº“ç®¡ç†å·¥å…· - æµ‹è¯•è®¡åˆ’æ–‡æ¡£ (macOS 11.7.10 Claude AI è‡ªåŠ¨æµ‹è¯•)

## 1. æµ‹è¯•æ¦‚è¿°

### 1.1 æµ‹è¯•ç¯å¢ƒä¿¡æ¯
- **æµ‹è¯•å¹³å°**: macOS 11.7.10 (Big Sur)
- **æµ‹è¯•æ¨¡å¼**: å•æœºæµ‹è¯• + Claude AI è‡ªåŠ¨æµ‹è¯•
- **ä»£ç ç”Ÿæˆ**: é€šè¿‡ Claude ç”Ÿæˆæ‰€æœ‰ä»£ç å’Œæµ‹è¯•ç”¨ä¾‹
- **æµ‹è¯•æ‰§è¡Œ**: Claude AI ååŠ©è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œå’ŒéªŒè¯
- **æµ‹è¯•ä½ç½®**: `/Users/weichen/Documents/testClass`

### 1.2 Claude AI è¾…åŠ©æµ‹è¯•ç›®æ ‡
ç¡®ä¿å›¢é˜ŸçŸ¥è¯†åº“ç®¡ç†å·¥å…·åœ¨macOS 11.7.10å•æœºç¯å¢ƒä¸‹åŠŸèƒ½å®Œæ•´ã€æ€§èƒ½ç¨³å®šã€ç”¨æˆ·ä½“éªŒè‰¯å¥½ï¼Œé€šè¿‡Claude AIè¾…åŠ©å®ç°é«˜æ•ˆçš„è‡ªåŠ¨åŒ–æµ‹è¯•ç”Ÿæˆå’Œæ‰§è¡Œã€‚

### 1.3 å•æœºæµ‹è¯•èŒƒå›´
æœ¬æµ‹è¯•è®¡åˆ’è¦†ç›–ä»¥ä¸‹æ–¹é¢ï¼š
- **åŠŸèƒ½æµ‹è¯•**ï¼šClaudeç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼ŒéªŒè¯æ‰€æœ‰åŠŸèƒ½éœ€æ±‚
- **æœ¬åœ°æ€§èƒ½æµ‹è¯•**ï¼šç¡®ä¿åœ¨macOSç¯å¢ƒä¸‹çš„æ€§èƒ½è¡¨ç°
- **å®‰å…¨æµ‹è¯•**ï¼šClaudeååŠ©éªŒè¯ç³»ç»Ÿå®‰å…¨é˜²æŠ¤æœºåˆ¶
- **macOSå…¼å®¹æ€§æµ‹è¯•**ï¼šç¡®ä¿åœ¨macOS 11.7.10ä¸Šçš„å®Œç¾å…¼å®¹
- **ç”¨æˆ·ä½“éªŒæµ‹è¯•**ï¼šClaudeè¾…åŠ©ç•Œé¢å’Œäº¤äº’éªŒè¯

### 1.4 Claude AI è‡ªåŠ¨æµ‹è¯•ç­–ç•¥
é‡‡ç”¨**Claude AI å…¨ç¨‹ååŠ©çš„æ™ºèƒ½æµ‹è¯•**ç­–ç•¥ï¼š
- **æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ**ï¼šClaudeæ ¹æ®éœ€æ±‚è‡ªåŠ¨ç”Ÿæˆå®Œæ•´æµ‹è¯•ç”¨ä¾‹
- **æµ‹è¯•ä»£ç ç”Ÿæˆ**ï¼šClaudeç”Ÿæˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€E2Eæµ‹è¯•ä»£ç 
- **æµ‹è¯•æ‰§è¡ŒæŒ‡å¯¼**ï¼šClaudeæŒ‡å¯¼æµ‹è¯•æ‰§è¡Œå’Œç»“æœéªŒè¯
- **é—®é¢˜è¯Šæ–­**ï¼šClaudeååŠ©åˆ†ææµ‹è¯•å¤±è´¥åŸå› å’Œè§£å†³æ–¹æ¡ˆ

### 1.5 macOSå•æœºæµ‹è¯•ç¯å¢ƒ
- **å¼€å‘æµ‹è¯•ç¯å¢ƒ**ï¼šæœ¬åœ°macOSå¼€å‘æœºå™¨ (`~/Documents/testClass`)
- **æ•°æ®åº“æµ‹è¯•**ï¼šæœ¬åœ°SQLiteæ•°æ®åº“æ–‡ä»¶
- **æ–‡ä»¶å­˜å‚¨æµ‹è¯•**ï¼šæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ (`uploads/` ç›®å½•)
- **ç½‘ç»œæµ‹è¯•**ï¼šæœ¬åœ°localhostç¯å¢ƒ (http://localhost:3000, http://localhost:8000)

## 2. Claude AI æµ‹è¯•ååŠ©æ¨¡å¼

### 2.1 Claude AI æµ‹è¯•è§’è‰²å®šä¹‰
- **æµ‹è¯•æ¶æ„å¸ˆ**ï¼šè®¾è®¡æµ‹è¯•æ¡†æ¶å’Œç­–ç•¥
- **æµ‹è¯•ç”¨ä¾‹è®¾è®¡å¸ˆ**ï¼šæ ¹æ®éœ€æ±‚ç”Ÿæˆè¯¦ç»†æµ‹è¯•ç”¨ä¾‹
- **æµ‹è¯•ä»£ç ç”Ÿæˆå™¨**ï¼šç”Ÿæˆå„å±‚çº§çš„è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç 
- **æµ‹è¯•æ‰§è¡Œé¡¾é—®**ï¼šæŒ‡å¯¼æµ‹è¯•æ‰§è¡Œå’Œç»“æœåˆ†æ
- **é—®é¢˜è¯Šæ–­ä¸“å®¶**ï¼šåˆ†ææµ‹è¯•å¤±è´¥å’Œç³»ç»Ÿé—®é¢˜

### 2.2 å•äººå¼€å‘æµ‹è¯•æµç¨‹
```
éœ€æ±‚åˆ†æ â†’ Claudeç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ â†’ Claudeç”Ÿæˆæµ‹è¯•ä»£ç  â†’ æœ¬åœ°è‡ªåŠ¨æ‰§è¡Œ â†’ Claudeåˆ†æç»“æœ â†’ é—®é¢˜ä¿®å¤ â†’ å›å½’éªŒè¯
    â†‘                                                                                            â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ClaudeæŒç»­ä¼˜åŒ–æµ‹è¯•ç­–ç•¥ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Claude AI æµ‹è¯•åä½œæ–¹å¼

#### æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆè¯·æ±‚æ¨¡å¼
1. **æ˜ç¡®æµ‹è¯•éœ€æ±‚**ï¼šè¯¦ç»†æè¿°åŠŸèƒ½å’Œæµ‹è¯•åœºæ™¯
2. **æä¾›æŠ€æœ¯ä¸Šä¸‹æ–‡**ï¼šç»™å‡ºä»£ç ç»“æ„å’ŒæŠ€æœ¯æ ˆä¿¡æ¯
3. **æŒ‡å®šæµ‹è¯•ç±»å‹**ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€E2Eæµ‹è¯•
4. **éªŒè¯æµ‹è¯•ç»“æœ**ï¼šæ‰§è¡Œç”Ÿæˆçš„æµ‹è¯•å¹¶åé¦ˆç»“æœ

#### æµ‹è¯•é—®é¢˜è§£å†³æ¨¡å¼
- **å¤±è´¥åˆ†æ**ï¼šæä¾›æµ‹è¯•å¤±è´¥ä¿¡æ¯è·å–è§£å†³æ–¹æ¡ˆ
- **è¦†ç›–ç‡ä¼˜åŒ–**ï¼šè¯¢é—®å¦‚ä½•æé«˜æµ‹è¯•è¦†ç›–ç‡
- **æ€§èƒ½æµ‹è¯•**ï¼šè·å–æ€§èƒ½æµ‹è¯•ç­–ç•¥å’Œå®ç°
- **æœ€ä½³å®è·µ**ï¼šå­¦ä¹ æµ‹è¯•è®¾è®¡æœ€ä½³å®è·µ

## 3. macOS å•æœºæµ‹è¯•åˆ†å±‚ç­–ç•¥

### 3.1 Claude AI ç”Ÿæˆçš„æµ‹è¯•é‡‘å­—å¡”

```
                    E2E Tests (10%)
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Claudeç”Ÿæˆ      â”‚
                  â”‚  ç”¨æˆ·æµç¨‹æµ‹è¯•    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                Integration Tests (20%)
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Claudeç”Ÿæˆ APIæµ‹è¯•      â”‚
              â”‚  æ•°æ®åº“é›†æˆæµ‹è¯•          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            Unit Tests (70%)
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Claudeç”Ÿæˆ ç»„ä»¶æµ‹è¯•          â”‚
          â”‚  å‡½æ•°æµ‹è¯• ä¸šåŠ¡é€»è¾‘æµ‹è¯•        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡ (macOSå•æœºç‰ˆ)
- **å•å…ƒæµ‹è¯•è¦†ç›–ç‡**: > 85% (Claudeç”Ÿæˆé«˜è´¨é‡æµ‹è¯•)
- **é›†æˆæµ‹è¯•è¦†ç›–ç‡**: > 75% (é‡ç‚¹APIå’Œæ•°æ®åº“æµ‹è¯•)
- **ç«¯åˆ°ç«¯æµ‹è¯•è¦†ç›–ç‡**: > 60% (æ ¸å¿ƒç”¨æˆ·æµç¨‹)
- **éœ€æ±‚è¦†ç›–ç‡**: 100% (ç¡®ä¿æ‰€æœ‰åŠŸèƒ½ç‚¹æµ‹è¯•)

## 4. Claude AI ç”Ÿæˆçš„æµ‹è¯•ä»£ç ç¤ºä¾‹

### 4.1 å‰ç«¯å•å…ƒæµ‹è¯• (Claudeç”Ÿæˆ)

#### Reactç»„ä»¶æµ‹è¯•
```javascript
// Claudeç”Ÿæˆçš„DocumentCardç»„ä»¶æµ‹è¯•
import { render, screen, fireEvent } from '@testing-library/react';
import { DocumentCard } from '../components/DocumentCard';
import { AuthContext } from '../contexts/AuthContext';

describe('DocumentCard Component', () => {
  const mockDocument = {
    id: 1,
    title: 'æµ‹è¯•æ–‡æ¡£',
    description: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æ¡£',
    fileName: 'test.pdf',
    fileSize: 1024000,
    createdAt: '2025-09-13T10:00:00Z',
    tags: ['æŠ€æœ¯', 'æ–‡æ¡£']
  };

  const mockAuthContext = {
    user: { id: 1, role: 'editor' },
    isAuthenticated: true
  };

  test('åº”è¯¥æ­£ç¡®æ¸²æŸ“æ–‡æ¡£ä¿¡æ¯', () => {
    render(
      <AuthContext.Provider value={mockAuthContext}>
        <DocumentCard document={mockDocument} />
      </AuthContext.Provider>
    );

    expect(screen.getByText('æµ‹è¯•æ–‡æ¡£')).toBeInTheDocument();
    expect(screen.getByText('è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æ¡£')).toBeInTheDocument();
    expect(screen.getByText('1.0 MB')).toBeInTheDocument();
  });

  test('åº”è¯¥æ˜¾ç¤ºæ–‡æ¡£æ ‡ç­¾', () => {
    render(
      <AuthContext.Provider value={mockAuthContext}>
        <DocumentCard document={mockDocument} />
      </AuthContext.Provider>
    );

    expect(screen.getByText('æŠ€æœ¯')).toBeInTheDocument();
    expect(screen.getByText('æ–‡æ¡£')).toBeInTheDocument();
  });

  test('ä¸‹è½½æŒ‰é’®ç‚¹å‡»åº”è¯¥è§¦å‘ä¸‹è½½', () => {
    const mockDownload = jest.fn();
    render(
      <AuthContext.Provider value={mockAuthContext}>
        <DocumentCard document={mockDocument} onDownload={mockDownload} />
      </AuthContext.Provider>
    );

    fireEvent.click(screen.getByTestId('download-button'));
    expect(mockDownload).toHaveBeenCalledWith(1);
  });

  test('éç¼–è¾‘æƒé™ç”¨æˆ·ä¸åº”æ˜¾ç¤ºåˆ é™¤æŒ‰é’®', () => {
    const viewerContext = {
      user: { id: 2, role: 'viewer' },
      isAuthenticated: true
    };

    render(
      <AuthContext.Provider value={viewerContext}>
        <DocumentCard document={mockDocument} />
      </AuthContext.Provider>
    );

    expect(screen.queryByTestId('delete-button')).not.toBeInTheDocument();
  });
});
```

#### å‰ç«¯Hookæµ‹è¯•
```javascript
// Claudeç”Ÿæˆçš„useDocuments Hookæµ‹è¯•
import { renderHook, act } from '@testing-library/react';
import { useDocuments } from '../hooks/useDocuments';
import * as documentApi from '../services/documentApi';

jest.mock('../services/documentApi');

describe('useDocuments Hook', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  test('åº”è¯¥æ­£ç¡®è·å–æ–‡æ¡£åˆ—è¡¨', async () => {
    const mockDocuments = [
      { id: 1, title: 'æ–‡æ¡£1' },
      { id: 2, title: 'æ–‡æ¡£2' }
    ];
    
    documentApi.getDocuments.mockResolvedValue({
      data: mockDocuments,
      total: 2
    });

    const { result } = renderHook(() => useDocuments());

    expect(result.current.loading).toBe(true);
    expect(result.current.documents).toEqual([]);

    await act(async () => {
      await result.current.fetchDocuments();
    });

    expect(result.current.loading).toBe(false);
    expect(result.current.documents).toEqual(mockDocuments);
    expect(result.current.total).toBe(2);
  });

  test('åº”è¯¥å¤„ç†è·å–æ–‡æ¡£å¤±è´¥', async () => {
    const mockError = new Error('Network Error');
    documentApi.getDocuments.mockRejectedValue(mockError);

    const { result } = renderHook(() => useDocuments());

    await act(async () => {
      await result.current.fetchDocuments();
    });

    expect(result.current.loading).toBe(false);
    expect(result.current.error).toBe(mockError.message);
    expect(result.current.documents).toEqual([]);
  });

  test('æœç´¢åŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œ', async () => {
    const mockSearchResults = [
      { id: 1, title: 'æœç´¢ç»“æœ1' }
    ];

    documentApi.searchDocuments.mockResolvedValue({
      data: mockSearchResults,
      total: 1
    });

    const { result } = renderHook(() => useDocuments());

    await act(async () => {
      await result.current.searchDocuments('test query');
    });

    expect(documentApi.searchDocuments).toHaveBeenCalledWith('test query');
    expect(result.current.documents).toEqual(mockSearchResults);
  });
});
```

### 4.2 åç«¯å•å…ƒæµ‹è¯• (Claudeç”Ÿæˆ)

#### æ§åˆ¶å™¨æµ‹è¯•
```javascript
// Claudeç”Ÿæˆçš„DocumentControlleræµ‹è¯•
import request from 'supertest';
import app from '../../app';
import { DocumentService } from '../../services/DocumentService';
import { AuthMiddleware } from '../../middleware/AuthMiddleware';

jest.mock('../../services/DocumentService');
jest.mock('../../middleware/AuthMiddleware');

describe('DocumentController', () => {
  beforeEach(() => {
    jest.clearAllMocks();
    AuthMiddleware.verifyToken.mockImplementation((req, res, next) => {
      req.user = { id: 1, role: 'editor' };
      next();
    });
  });

  describe('GET /api/v1/documents', () => {
    test('åº”è¯¥è¿”å›æ–‡æ¡£åˆ—è¡¨', async () => {
      const mockDocuments = [
        { id: 1, title: 'æ–‡æ¡£1', createdBy: 1 },
        { id: 2, title: 'æ–‡æ¡£2', createdBy: 1 }
      ];

      DocumentService.prototype.getDocuments.mockResolvedValue({
        documents: mockDocuments,
        total: 2,
        page: 1,
        limit: 10
      });

      const response = await request(app)
        .get('/api/v1/documents')
        .set('Authorization', 'Bearer valid_token');

      expect(response.status).toBe(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.documents).toEqual(mockDocuments);
      expect(response.body.data.total).toBe(2);
    });

    test('åº”è¯¥æ”¯æŒåˆ†é¡µæŸ¥è¯¢', async () => {
      DocumentService.prototype.getDocuments.mockResolvedValue({
        documents: [],
        total: 50,
        page: 2,
        limit: 20
      });

      const response = await request(app)
        .get('/api/v1/documents?page=2&limit=20')
        .set('Authorization', 'Bearer valid_token');

      expect(response.status).toBe(200);
      expect(DocumentService.prototype.getDocuments).toHaveBeenCalledWith({
        page: 2,
        limit: 20,
        userId: 1
      });
    });

    test('æ— è®¤è¯åº”è¯¥è¿”å›401', async () => {
      const response = await request(app)
        .get('/api/v1/documents');

      expect(response.status).toBe(401);
    });
  });

  describe('POST /api/v1/documents', () => {
    test('åº”è¯¥æˆåŠŸä¸Šä¼ æ–‡æ¡£', async () => {
      const mockDocument = {
        id: 1,
        title: 'æ–°æ–‡æ¡£',
        fileName: 'test.pdf',
        filePath: '/uploads/test.pdf'
      };

      DocumentService.prototype.createDocument.mockResolvedValue(mockDocument);

      const response = await request(app)
        .post('/api/v1/documents')
        .set('Authorization', 'Bearer valid_token')
        .attach('file', Buffer.from('test file'), 'test.pdf')
        .field('title', 'æ–°æ–‡æ¡£')
        .field('description', 'æµ‹è¯•æ–‡æ¡£æè¿°');

      expect(response.status).toBe(201);
      expect(response.body.success).toBe(true);
      expect(response.body.data).toEqual(mockDocument);
    });

    test('ç¼ºå°‘æ–‡ä»¶åº”è¯¥è¿”å›400', async () => {
      const response = await request(app)
        .post('/api/v1/documents')
        .set('Authorization', 'Bearer valid_token')
        .field('title', 'æ–°æ–‡æ¡£');

      expect(response.status).toBe(400);
      expect(response.body.success).toBe(false);
      expect(response.body.message).toContain('æ–‡ä»¶');
    });
  });
});
```

#### æœåŠ¡å±‚æµ‹è¯•
```javascript
// Claudeç”Ÿæˆçš„DocumentServiceæµ‹è¯•
import { DocumentService } from '../../services/DocumentService';
import { DatabaseManager } from '../../database/DatabaseManager';
import { FileManager } from '../../utils/FileManager';
import path from 'path';
import fs from 'fs/promises';

jest.mock('../../database/DatabaseManager');
jest.mock('../../utils/FileManager');

describe('DocumentService', () => {
  let documentService;
  let mockDb;

  beforeEach(() => {
    mockDb = {
      get: jest.fn(),
      all: jest.fn(),
      run: jest.fn()
    };
    DatabaseManager.getInstance.mockReturnValue(mockDb);
    documentService = new DocumentService();
  });

  afterEach(() => {
    jest.clearAllMocks();
  });

  describe('getDocuments', () => {
    test('åº”è¯¥è¿”å›ç”¨æˆ·æ–‡æ¡£åˆ—è¡¨', async () => {
      const mockDocuments = [
        {
          id: 1,
          title: 'æ–‡æ¡£1',
          description: 'æè¿°1',
          fileName: 'doc1.pdf',
          createdBy: 1,
          createdAt: '2025-09-13T10:00:00Z'
        }
      ];

      mockDb.all.mockResolvedValue(mockDocuments);
      mockDb.get.mockResolvedValue({ count: 1 });

      const result = await documentService.getDocuments({
        page: 1,
        limit: 10,
        userId: 1
      });

      expect(result.documents).toEqual(mockDocuments);
      expect(result.total).toBe(1);
      expect(result.page).toBe(1);
      expect(result.limit).toBe(10);
    });

    test('åº”è¯¥æ”¯æŒæœç´¢åŠŸèƒ½', async () => {
      const searchQuery = 'æŠ€æœ¯æ–‡æ¡£';
      mockDb.all.mockResolvedValue([]);
      mockDb.get.mockResolvedValue({ count: 0 });

      await documentService.getDocuments({
        page: 1,
        limit: 10,
        userId: 1,
        search: searchQuery
      });

      expect(mockDb.all).toHaveBeenCalledWith(
        expect.stringContaining('WHERE'),
        expect.arrayContaining([`%${searchQuery}%`])
      );
    });
  });

  describe('createDocument', () => {
    test('åº”è¯¥æˆåŠŸåˆ›å»ºæ–‡æ¡£', async () => {
      const fileData = {
        originalname: 'test.pdf',
        buffer: Buffer.from('test'),
        mimetype: 'application/pdf',
        size: 1024
      };

      const documentData = {
        title: 'æµ‹è¯•æ–‡æ¡£',
        description: 'æµ‹è¯•æè¿°',
        tags: ['æŠ€æœ¯', 'æ–‡æ¡£']
      };

      const userId = 1;
      const savedFilePath = '/uploads/test_123456.pdf';

      FileManager.saveFile.mockResolvedValue(savedFilePath);
      mockDb.run.mockResolvedValue({ lastID: 1 });
      mockDb.get.mockResolvedValue({
        id: 1,
        title: 'æµ‹è¯•æ–‡æ¡£',
        fileName: 'test_123456.pdf',
        filePath: savedFilePath
      });

      const result = await documentService.createDocument(
        fileData,
        documentData,
        userId
      );

      expect(FileManager.saveFile).toHaveBeenCalledWith(
        fileData,
        expect.stringContaining('uploads')
      );
      expect(result.id).toBe(1);
      expect(result.title).toBe('æµ‹è¯•æ–‡æ¡£');
    });

    test('æ–‡ä»¶ä¿å­˜å¤±è´¥åº”è¯¥æŠ›å‡ºé”™è¯¯', async () => {
      const fileData = { originalname: 'test.pdf' };
      const documentData = { title: 'æµ‹è¯•æ–‡æ¡£' };

      FileManager.saveFile.mockRejectedValue(new Error('æ–‡ä»¶ä¿å­˜å¤±è´¥'));

      await expect(
        documentService.createDocument(fileData, documentData, 1)
      ).rejects.toThrow('æ–‡ä»¶ä¿å­˜å¤±è´¥');
    });
  });

  describe('deleteDocument', () => {
    test('åº”è¯¥è½¯åˆ é™¤æ–‡æ¡£', async () => {
      mockDb.get.mockResolvedValue({
        id: 1,
        createdBy: 1,
        filePath: '/uploads/test.pdf'
      });
      mockDb.run.mockResolvedValue({ changes: 1 });

      const result = await documentService.deleteDocument(1, 1);

      expect(mockDb.run).toHaveBeenCalledWith(
        expect.stringContaining('UPDATE documents SET deleted_at'),
        expect.any(Array)
      );
      expect(result).toBe(true);
    });

    test('åˆ é™¤ä»–äººæ–‡æ¡£åº”è¯¥æŠ›å‡ºé”™è¯¯', async () => {
      mockDb.get.mockResolvedValue({
        id: 1,
        createdBy: 2
      });

      await expect(
        documentService.deleteDocument(1, 1)
      ).rejects.toThrow('æƒé™ä¸è¶³');
    });
  });
});
```

### 4.3 é›†æˆæµ‹è¯• (Claudeç”Ÿæˆ)

#### APIé›†æˆæµ‹è¯•
```javascript
// Claudeç”Ÿæˆçš„APIé›†æˆæµ‹è¯•
import request from 'supertest';
import app from '../../app';
import { DatabaseManager } from '../../database/DatabaseManager';
import path from 'path';
import fs from 'fs/promises';

describe('API Integration Tests', () => {
  let authToken;
  let userId;

  beforeAll(async () => {
    // åˆå§‹åŒ–æµ‹è¯•æ•°æ®åº“
    await DatabaseManager.initializeTestDatabase();
    
    // åˆ›å»ºæµ‹è¯•ç”¨æˆ·å¹¶è·å–è®¤è¯token
    const registerResponse = await request(app)
      .post('/api/v1/auth/register')
      .send({
        username: 'testuser',
        email: 'test@example.com',
        password: 'test123456',
        fullName: 'æµ‹è¯•ç”¨æˆ·'
      });

    expect(registerResponse.status).toBe(201);

    const loginResponse = await request(app)
      .post('/api/v1/auth/login')
      .send({
        username: 'testuser',
        password: 'test123456'
      });

    expect(loginResponse.status).toBe(200);
    authToken = loginResponse.body.data.token;
    userId = loginResponse.body.data.user.id;
  });

  afterAll(async () => {
    // æ¸…ç†æµ‹è¯•æ•°æ®åº“
    await DatabaseManager.clearTestDatabase();
  });

  describe('å®Œæ•´æ–‡æ¡£ç®¡ç†æµç¨‹', () => {
    let documentId;

    test('ä¸Šä¼ æ–‡æ¡£ â†’ è·å–åˆ—è¡¨ â†’ æŸ¥çœ‹è¯¦æƒ… â†’ ä¸‹è½½ â†’ åˆ é™¤', async () => {
      // 1. ä¸Šä¼ æ–‡æ¡£
      const testFilePath = path.join(__dirname, '../fixtures/test.pdf');
      const uploadResponse = await request(app)
        .post('/api/v1/documents')
        .set('Authorization', `Bearer ${authToken}`)
        .attach('file', testFilePath)
        .field('title', 'é›†æˆæµ‹è¯•æ–‡æ¡£')
        .field('description', 'è¿™æ˜¯é›†æˆæµ‹è¯•ä¸Šä¼ çš„æ–‡æ¡£')
        .field('tags', JSON.stringify(['æµ‹è¯•', 'é›†æˆ']));

      expect(uploadResponse.status).toBe(201);
      expect(uploadResponse.body.success).toBe(true);
      documentId = uploadResponse.body.data.id;

      // 2. è·å–æ–‡æ¡£åˆ—è¡¨ï¼ŒéªŒè¯æ–‡æ¡£å­˜åœ¨
      const listResponse = await request(app)
        .get('/api/v1/documents')
        .set('Authorization', `Bearer ${authToken}`);

      expect(listResponse.status).toBe(200);
      expect(listResponse.body.data.documents).toHaveLength(1);
      expect(listResponse.body.data.documents[0].title).toBe('é›†æˆæµ‹è¯•æ–‡æ¡£');

      // 3. æŸ¥çœ‹æ–‡æ¡£è¯¦æƒ…
      const detailResponse = await request(app)
        .get(`/api/v1/documents/${documentId}`)
        .set('Authorization', `Bearer ${authToken}`);

      expect(detailResponse.status).toBe(200);
      expect(detailResponse.body.data.title).toBe('é›†æˆæµ‹è¯•æ–‡æ¡£');
      expect(detailResponse.body.data.description).toBe('è¿™æ˜¯é›†æˆæµ‹è¯•ä¸Šä¼ çš„æ–‡æ¡£');

      // 4. ä¸‹è½½æ–‡æ¡£
      const downloadResponse = await request(app)
        .get(`/api/v1/documents/${documentId}/download`)
        .set('Authorization', `Bearer ${authToken}`);

      expect(downloadResponse.status).toBe(200);
      expect(downloadResponse.headers['content-type']).toBe('application/pdf');

      // 5. åˆ é™¤æ–‡æ¡£
      const deleteResponse = await request(app)
        .delete(`/api/v1/documents/${documentId}`)
        .set('Authorization', `Bearer ${authToken}`);

      expect(deleteResponse.status).toBe(200);

      // 6. éªŒè¯åˆ é™¤åè·å–åˆ—è¡¨ä¸ºç©º
      const emptyListResponse = await request(app)
        .get('/api/v1/documents')
        .set('Authorization', `Bearer ${authToken}`);

      expect(emptyListResponse.body.data.documents).toHaveLength(0);
    });
  });

  describe('æœç´¢å’Œæ ‡ç­¾é›†æˆæµ‹è¯•', () => {
    beforeEach(async () => {
      // åˆ›å»ºæµ‹è¯•æ–‡æ¡£
      await request(app)
        .post('/api/v1/documents')
        .set('Authorization', `Bearer ${authToken}`)
        .attach('file', Buffer.from('test content'), 'tech_doc.pdf')
        .field('title', 'æŠ€æœ¯æ–‡æ¡£')
        .field('description', 'è¿™æ˜¯ä¸€ä¸ªæŠ€æœ¯ç›¸å…³çš„æ–‡æ¡£')
        .field('tags', JSON.stringify(['æŠ€æœ¯', 'API']));

      await request(app)
        .post('/api/v1/documents')
        .set('Authorization', `Bearer ${authToken}`)
        .attach('file', Buffer.from('product content'), 'product_doc.pdf')
        .field('title', 'äº§å“æ–‡æ¡£')
        .field('description', 'è¿™æ˜¯ä¸€ä¸ªäº§å“ç›¸å…³çš„æ–‡æ¡£')
        .field('tags', JSON.stringify(['äº§å“', 'éœ€æ±‚']));
    });

    test('æœç´¢åŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œ', async () => {
      // æœç´¢æ ‡é¢˜å…³é”®è¯
      const searchResponse = await request(app)
        .get('/api/v1/search?q=æŠ€æœ¯')
        .set('Authorization', `Bearer ${authToken}`);

      expect(searchResponse.status).toBe(200);
      expect(searchResponse.body.data.documents).toHaveLength(1);
      expect(searchResponse.body.data.documents[0].title).toBe('æŠ€æœ¯æ–‡æ¡£');

      // æœç´¢æè¿°å…³é”®è¯
      const descSearchResponse = await request(app)
        .get('/api/v1/search?q=äº§å“ç›¸å…³')
        .set('Authorization', `Bearer ${authToken}`);

      expect(descSearchResponse.status).toBe(200);
      expect(descSearchResponse.body.data.documents).toHaveLength(1);
      expect(descSearchResponse.body.data.documents[0].title).toBe('äº§å“æ–‡æ¡£');
    });

    test('æ ‡ç­¾ç­›é€‰åº”è¯¥æ­£å¸¸å·¥ä½œ', async () => {
      // æŒ‰æ ‡ç­¾ç­›é€‰
      const tagFilterResponse = await request(app)
        .get('/api/v1/documents?tags=æŠ€æœ¯')
        .set('Authorization', `Bearer ${authToken}`);

      expect(tagFilterResponse.status).toBe(200);
      expect(tagFilterResponse.body.data.documents).toHaveLength(1);
      expect(tagFilterResponse.body.data.documents[0].title).toBe('æŠ€æœ¯æ–‡æ¡£');
    });

    test('æ ‡ç­¾ç®¡ç†åŠŸèƒ½', async () => {
      // è·å–æ‰€æœ‰æ ‡ç­¾
      const tagsResponse = await request(app)
        .get('/api/v1/tags')
        .set('Authorization', `Bearer ${authToken}`);

      expect(tagsResponse.status).toBe(200);
      expect(tagsResponse.body.data).toContainEqual(
        expect.objectContaining({ name: 'æŠ€æœ¯' })
      );
      expect(tagsResponse.body.data).toContainEqual(
        expect.objectContaining({ name: 'äº§å“' })
      );
    });
  });
});
```

### 4.4 ç«¯åˆ°ç«¯æµ‹è¯• (Claudeç”Ÿæˆ)

#### Playwright E2Eæµ‹è¯•
```javascript
// Claudeç”Ÿæˆçš„E2Eæµ‹è¯•
import { test, expect } from '@playwright/test';
import path from 'path';

test.describe('çŸ¥è¯†åº“ç®¡ç†å·¥å…· E2Eæµ‹è¯•', () => {
  let page;

  test.beforeEach(async ({ browser }) => {
    page = await browser.newPage();
    
    // æ¸…ç†æµ‹è¯•æ•°æ®
    await page.goto('http://localhost:3000/test/cleanup');
    
    // è®¿é—®ç™»å½•é¡µé¢
    await page.goto('http://localhost:3000/login');
  });

  test.afterEach(async () => {
    await page.close();
  });

  test('å®Œæ•´ç”¨æˆ·æµç¨‹ï¼šæ³¨å†Œ â†’ ç™»å½• â†’ ä¸Šä¼  â†’ æœç´¢ â†’ ä¸‹è½½', async () => {
    // 1. ç”¨æˆ·æ³¨å†Œ
    await page.click('[data-testid="register-link"]');
    await page.fill('[data-testid="register-username"]', 'e2euser');
    await page.fill('[data-testid="register-email"]', 'e2e@test.com');
    await page.fill('[data-testid="register-password"]', 'password123');
    await page.fill('[data-testid="register-fullname"]', 'E2Eæµ‹è¯•ç”¨æˆ·');
    await page.click('[data-testid="register-submit"]');

    // éªŒè¯æ³¨å†ŒæˆåŠŸæç¤º
    await expect(page.locator('[data-testid="success-message"]')).toContainText('æ³¨å†ŒæˆåŠŸ');

    // 2. ç”¨æˆ·ç™»å½•
    await page.fill('[data-testid="login-username"]', 'e2euser');
    await page.fill('[data-testid="login-password"]', 'password123');
    await page.click('[data-testid="login-submit"]');

    // éªŒè¯ç™»å½•æˆåŠŸï¼Œè·³è½¬åˆ°ä»ªè¡¨ç›˜
    await expect(page).toHaveURL('http://localhost:3000/dashboard');
    await expect(page.locator('[data-testid="welcome-message"]')).toContainText('E2Eæµ‹è¯•ç”¨æˆ·');

    // 3. ä¸Šä¼ æ–‡æ¡£
    await page.click('[data-testid="upload-button"]');
    
    // é€‰æ‹©æ–‡ä»¶
    const fileInput = page.locator('[data-testid="file-input"]');
    await fileInput.setInputFiles(path.join(__dirname, '../fixtures/sample.pdf'));
    
    // å¡«å†™æ–‡æ¡£ä¿¡æ¯
    await page.fill('[data-testid="document-title"]', 'E2Eæµ‹è¯•æ–‡æ¡£');
    await page.fill('[data-testid="document-description"]', 'è¿™æ˜¯E2Eæµ‹è¯•ä¸Šä¼ çš„æ–‡æ¡£');
    
    // æ·»åŠ æ ‡ç­¾
    await page.click('[data-testid="tag-input"]');
    await page.keyboard.type('æµ‹è¯•');
    await page.keyboard.press('Enter');
    await page.keyboard.type('E2E');
    await page.keyboard.press('Enter');
    
    // æäº¤ä¸Šä¼ 
    await page.click('[data-testid="upload-submit"]');
    
    // éªŒè¯ä¸Šä¼ æˆåŠŸ
    await expect(page.locator('[data-testid="upload-success"]')).toBeVisible();
    await expect(page.locator('[data-testid="document-list"]')).toContainText('E2Eæµ‹è¯•æ–‡æ¡£');

    // 4. æœç´¢æ–‡æ¡£
    await page.fill('[data-testid="search-input"]', 'E2Eæµ‹è¯•');
    await page.press('[data-testid="search-input"]', 'Enter');
    
    // éªŒè¯æœç´¢ç»“æœ
    await expect(page.locator('[data-testid="search-results"]')).toContainText('E2Eæµ‹è¯•æ–‡æ¡£');
    await expect(page.locator('[data-testid="search-count"]')).toContainText('æ‰¾åˆ° 1 ä¸ªæ–‡æ¡£');

    // 5. æŸ¥çœ‹æ–‡æ¡£è¯¦æƒ…
    await page.click('[data-testid="document-card"]:has-text("E2Eæµ‹è¯•æ–‡æ¡£")');
    await expect(page.locator('[data-testid="document-detail-title"]')).toContainText('E2Eæµ‹è¯•æ–‡æ¡£');
    await expect(page.locator('[data-testid="document-detail-description"]')).toContainText('è¿™æ˜¯E2Eæµ‹è¯•ä¸Šä¼ çš„æ–‡æ¡£');
    
    // éªŒè¯æ ‡ç­¾æ˜¾ç¤º
    await expect(page.locator('[data-testid="document-tags"]')).toContainText('æµ‹è¯•');
    await expect(page.locator('[data-testid="document-tags"]')).toContainText('E2E');

    // 6. ä¸‹è½½æ–‡æ¡£
    const downloadPromise = page.waitForEvent('download');
    await page.click('[data-testid="download-button"]');
    const download = await downloadPromise;
    
    // éªŒè¯ä¸‹è½½æ–‡ä»¶å
    expect(download.suggestedFilename()).toContain('sample.pdf');
  });

  test('é«˜çº§æœç´¢åŠŸèƒ½æµ‹è¯•', async () => {
    // å…ˆç™»å½•
    await page.fill('[data-testid="login-username"]', 'admin');
    await page.fill('[data-testid="login-password"]', 'admin123');
    await page.click('[data-testid="login-submit"]');

    // è®¿é—®é«˜çº§æœç´¢
    await page.click('[data-testid="advanced-search-button"]');
    
    // è®¾ç½®æœç´¢æ¡ä»¶
    await page.fill('[data-testid="search-title"]', 'æŠ€æœ¯');
    await page.selectOption('[data-testid="search-filetype"]', 'pdf');
    await page.click('[data-testid="search-tag"]:has-text("æŠ€æœ¯")');
    
    // è®¾ç½®æ—¶é—´èŒƒå›´
    await page.fill('[data-testid="search-date-from"]', '2025-09-01');
    await page.fill('[data-testid="search-date-to"]', '2025-09-30');
    
    // æ‰§è¡Œæœç´¢
    await page.click('[data-testid="advanced-search-submit"]');
    
    // éªŒè¯æœç´¢ç»“æœ
    await expect(page.locator('[data-testid="search-results-container"]')).toBeVisible();
    
    // éªŒè¯ç­›é€‰æ¡ä»¶æ˜¾ç¤º
    await expect(page.locator('[data-testid="active-filters"]')).toContainText('æ–‡ä»¶ç±»å‹: PDF');
    await expect(page.locator('[data-testid="active-filters"]')).toContainText('æ ‡ç­¾: æŠ€æœ¯');
  });

  test('å“åº”å¼è®¾è®¡æµ‹è¯•', async () => {
    // ç™»å½•
    await page.fill('[data-testid="login-username"]', 'admin');
    await page.fill('[data-testid="login-password"]', 'admin123');
    await page.click('[data-testid="login-submit"]');

    // æµ‹è¯•æ¡Œé¢è§†å›¾
    await page.setViewportSize({ width: 1920, height: 1080 });
    await expect(page.locator('[data-testid="sidebar"]')).toBeVisible();
    await expect(page.locator('[data-testid="main-content"]')).toHaveCSS('margin-left', '240px');

    // æµ‹è¯•å¹³æ¿è§†å›¾
    await page.setViewportSize({ width: 768, height: 1024 });
    await expect(page.locator('[data-testid="mobile-menu-button"]')).toBeVisible();
    
    // æµ‹è¯•æ‰‹æœºè§†å›¾
    await page.setViewportSize({ width: 375, height: 667 });
    await expect(page.locator('[data-testid="mobile-header"]')).toBeVisible();
    await expect(page.locator('[data-testid="document-grid"]')).toHaveCSS('grid-template-columns', '1fr');
  });

  test('æƒé™æ§åˆ¶æµ‹è¯•', async () => {
    // ä»¥æŸ¥çœ‹è€…èº«ä»½ç™»å½•
    await page.fill('[data-testid="login-username"]', 'viewer');
    await page.fill('[data-testid="login-password"]', 'viewer123');
    await page.click('[data-testid="login-submit"]');

    // éªŒè¯æŸ¥çœ‹è€…æƒé™é™åˆ¶
    await expect(page.locator('[data-testid="upload-button"]')).not.toBeVisible();
    await expect(page.locator('[data-testid="delete-button"]')).not.toBeVisible();
    
    // å¯ä»¥æŸ¥çœ‹å’Œä¸‹è½½æ–‡æ¡£
    await expect(page.locator('[data-testid="document-list"]')).toBeVisible();
    await expect(page.locator('[data-testid="download-button"]')).toBeVisible();

    // ç™»å‡ºå¹¶ä»¥ç¼–è¾‘è€…èº«ä»½ç™»å½•
    await page.click('[data-testid="user-menu"]');
    await page.click('[data-testid="logout-button"]');
    
    await page.fill('[data-testid="login-username"]', 'editor');
    await page.fill('[data-testid="login-password"]', 'editor123');
    await page.click('[data-testid="login-submit"]');

    // éªŒè¯ç¼–è¾‘è€…æƒé™
    await expect(page.locator('[data-testid="upload-button"]')).toBeVisible();
    await expect(page.locator('[data-testid="edit-button"]')).toBeVisible();
  });
});
```

## 5. macOS å•æœºæ€§èƒ½æµ‹è¯• (ClaudeååŠ©)

### 5.1 æœ¬åœ°æ€§èƒ½æŒ‡æ ‡

#### macOSç¯å¢ƒæ€§èƒ½ç›®æ ‡
- **é¡µé¢åŠ è½½æ—¶é—´**: < 2ç§’ (æœ¬åœ°ç¯å¢ƒ)
- **APIå“åº”æ—¶é—´**: < 1ç§’ (localhost)
- **æœç´¢å“åº”æ—¶é—´**: < 1ç§’ (SQLiteæŸ¥è¯¢)
- **æ–‡ä»¶ä¸Šä¼ æ—¶é—´**: < 10ç§’ (10MBæ–‡ä»¶ï¼Œæœ¬åœ°å­˜å‚¨)
- **å†…å­˜ä½¿ç”¨**: < 200MB (Node.jsè¿›ç¨‹)
- **CPUä½¿ç”¨**: < 50% (æ­£å¸¸æ“ä½œæ—¶)

### 5.2 Claudeç”Ÿæˆçš„æ€§èƒ½æµ‹è¯•è„šæœ¬

#### å‰ç«¯æ€§èƒ½æµ‹è¯•
```javascript
// Claudeç”Ÿæˆçš„å‰ç«¯æ€§èƒ½æµ‹è¯•
import { test, expect } from '@playwright/test';

test.describe('å‰ç«¯æ€§èƒ½æµ‹è¯•', () => {
  test('é¡µé¢åŠ è½½æ€§èƒ½æ£€æŸ¥', async ({ page }) => {
    // å¯ç”¨æ€§èƒ½ç›‘æ§
    await page.goto('http://localhost:3000', { waitUntil: 'networkidle' });
    
    // è·å–æ€§èƒ½æŒ‡æ ‡
    const performanceTimings = await page.evaluate(() => {
      const perfData = performance.getEntriesByType('navigation')[0];
      return {
        domContentLoaded: perfData.domContentLoadedEventEnd - perfData.domContentLoadedEventStart,
        loadComplete: perfData.loadEventEnd - perfData.loadEventStart,
        firstPaint: performance.getEntriesByType('paint')[0]?.startTime,
        firstContentfulPaint: performance.getEntriesByType('paint')[1]?.startTime,
      };
    });

    // éªŒè¯æ€§èƒ½æŒ‡æ ‡
    expect(performanceTimings.domContentLoaded).toBeLessThan(1000); // 1ç§’å†…DOMåŠ è½½å®Œæˆ
    expect(performanceTimings.loadComplete).toBeLessThan(2000); // 2ç§’å†…é¡µé¢å®Œå…¨åŠ è½½
    expect(performanceTimings.firstPaint).toBeLessThan(500); // 500mså†…é¦–æ¬¡ç»˜åˆ¶
    expect(performanceTimings.firstContentfulPaint).toBeLessThan(800); // 800mså†…é¦–æ¬¡å†…å®¹ç»˜åˆ¶
  });

  test('æ–‡æ¡£åˆ—è¡¨æ¸²æŸ“æ€§èƒ½', async ({ page }) => {
    await page.goto('http://localhost:3000/dashboard');
    
    // æµ‹é‡æ¸²æŸ“æ—¶é—´
    const renderTime = await page.evaluate(() => {
      const start = performance.now();
      
      // è§¦å‘å¤§åˆ—è¡¨æ¸²æŸ“
      const event = new CustomEvent('loadDocuments', { 
        detail: { count: 1000 } 
      });
      document.dispatchEvent(event);
      
      // ç­‰å¾…æ¸²æŸ“å®Œæˆ
      return new Promise(resolve => {
        requestAnimationFrame(() => {
          const end = performance.now();
          resolve(end - start);
        });
      });
    });

    expect(renderTime).toBeLessThan(100); // 100mså†…å®Œæˆæ¸²æŸ“
  });

  test('æœç´¢å“åº”æ€§èƒ½', async ({ page }) => {
    await page.goto('http://localhost:3000/dashboard');
    
    const searchInput = page.locator('[data-testid="search-input"]');
    
    // æµ‹é‡æœç´¢å“åº”æ—¶é—´
    const searchTime = await page.evaluate(async () => {
      const searchInput = document.querySelector('[data-testid="search-input"]');
      const start = performance.now();
      
      // æ¨¡æ‹Ÿè¾“å…¥æœç´¢å…³é”®è¯
      searchInput.value = 'test query';
      searchInput.dispatchEvent(new Event('input', { bubbles: true }));
      
      // ç­‰å¾…æœç´¢å®Œæˆ
      await new Promise(resolve => setTimeout(resolve, 500));
      
      const end = performance.now();
      return end - start;
    });

    expect(searchTime).toBeLessThan(1000); // 1ç§’å†…è¿”å›æœç´¢ç»“æœ
  });
});
```

#### åç«¯æ€§èƒ½æµ‹è¯•
```javascript
// Claudeç”Ÿæˆçš„åç«¯æ€§èƒ½æµ‹è¯•
import autocannon from 'autocannon';
import { DatabaseManager } from '../database/DatabaseManager';

describe('åç«¯æ€§èƒ½æµ‹è¯•', () => {
  beforeAll(async () => {
    await DatabaseManager.initializeTestDatabase();
    // æ’å…¥æµ‹è¯•æ•°æ®
    await DatabaseManager.seedTestData(1000); // 1000æ¡æ–‡æ¡£è®°å½•
  });

  afterAll(async () => {
    await DatabaseManager.clearTestDatabase();
  });

  test('APIæ¥å£æ€§èƒ½æµ‹è¯•', async () => {
    // æµ‹è¯•æ–‡æ¡£åˆ—è¡¨APIæ€§èƒ½
    const listResult = await autocannon({
      url: 'http://localhost:8000/api/v1/documents',
      headers: {
        'Authorization': 'Bearer test_token'
      },
      connections: 10,
      duration: 10,
      timeout: 5
    });

    expect(listResult.requests.average).toBeGreaterThan(100); // å¹³å‡QPS > 100
    expect(listResult.latency.average).toBeLessThan(100); // å¹³å‡å»¶è¿Ÿ < 100ms

    // æµ‹è¯•æœç´¢APIæ€§èƒ½
    const searchResult = await autocannon({
      url: 'http://localhost:8000/api/v1/search?q=test',
      headers: {
        'Authorization': 'Bearer test_token'
      },
      connections: 5,
      duration: 10
    });

    expect(searchResult.latency.average).toBeLessThan(200); // æœç´¢å»¶è¿Ÿ < 200ms
  });

  test('æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½', async () => {
    const db = DatabaseManager.getInstance();
    
    // æµ‹è¯•ç®€å•æŸ¥è¯¢æ€§èƒ½
    const simpleQueryStart = performance.now();
    await db.all('SELECT * FROM documents LIMIT 100');
    const simpleQueryTime = performance.now() - simpleQueryStart;
    
    expect(simpleQueryTime).toBeLessThan(50); // ç®€å•æŸ¥è¯¢ < 50ms

    // æµ‹è¯•å¤æ‚æŸ¥è¯¢æ€§èƒ½ï¼ˆæœç´¢ï¼‰
    const searchQueryStart = performance.now();
    await db.all(`
      SELECT d.*, GROUP_CONCAT(t.name) as tags
      FROM documents d
      LEFT JOIN document_tags dt ON d.id = dt.document_id
      LEFT JOIN tags t ON dt.tag_id = t.id
      WHERE d.title LIKE '%test%' OR d.description LIKE '%test%'
      GROUP BY d.id
      LIMIT 50
    `, ['%test%', '%test%']);
    const searchQueryTime = performance.now() - searchQueryStart;
    
    expect(searchQueryTime).toBeLessThan(100); // æœç´¢æŸ¥è¯¢ < 100ms
  });

  test('æ–‡ä»¶æ“ä½œæ€§èƒ½', async () => {
    const fs = require('fs/promises');
    const path = require('path');
    
    // æµ‹è¯•æ–‡ä»¶è¯»å–æ€§èƒ½
    const testFilePath = path.join(__dirname, '../fixtures/large_file.pdf');
    const readStart = performance.now();
    const fileData = await fs.readFile(testFilePath);
    const readTime = performance.now() - readStart;
    
    expect(readTime).toBeLessThan(500); // æ–‡ä»¶è¯»å– < 500ms
    
    // æµ‹è¯•æ–‡ä»¶å†™å…¥æ€§èƒ½
    const writeStart = performance.now();
    const writePath = path.join(__dirname, '../temp/test_write.pdf');
    await fs.writeFile(writePath, fileData);
    const writeTime = performance.now() - writeStart;
    
    expect(writeTime).toBeLessThan(300); // æ–‡ä»¶å†™å…¥ < 300ms
    
    // æ¸…ç†æµ‹è¯•æ–‡ä»¶
    await fs.unlink(writePath);
  });
});
```

## 6. macOS å…¼å®¹æ€§å’Œå®‰å…¨æµ‹è¯•

### 6.1 macOS å…¼å®¹æ€§æµ‹è¯•

#### ç³»ç»Ÿå…¼å®¹æ€§æ£€æŸ¥
```javascript
// Claudeç”Ÿæˆçš„macOSå…¼å®¹æ€§æµ‹è¯•
describe('macOS 11.7.10 å…¼å®¹æ€§æµ‹è¯•', () => {
  test('Node.jsç‰ˆæœ¬å…¼å®¹æ€§', () => {
    const nodeVersion = process.version;
    const majorVersion = parseInt(nodeVersion.split('.')[0].substring(1));
    
    expect(majorVersion).toBeGreaterThanOrEqual(16); // æ”¯æŒNode.js 16+
  });

  test('æ–‡ä»¶è·¯å¾„å¤„ç†å…¼å®¹æ€§', async () => {
    const path = require('path');
    const fs = require('fs/promises');
    
    // æµ‹è¯•ä¸­æ–‡è·¯å¾„æ”¯æŒ
    const chinesePath = path.join(__dirname, '../temp/ä¸­æ–‡æ–‡æ¡£.txt');
    await fs.writeFile(chinesePath, 'æµ‹è¯•å†…å®¹');
    
    const content = await fs.readFile(chinesePath, 'utf8');
    expect(content).toBe('æµ‹è¯•å†…å®¹');
    
    await fs.unlink(chinesePath);
  });

  test('SQLiteåœ¨macOSä¸Šçš„å…¼å®¹æ€§', async () => {
    const Database = require('better-sqlite3');
    const path = require('path');
    
    const dbPath = path.join(__dirname, '../temp/test_macos.db');
    const db = new Database(dbPath);
    
    // åˆ›å»ºæµ‹è¯•è¡¨
    db.exec(`
      CREATE TABLE test_table (
        id INTEGER PRIMARY KEY,
        name TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `);
    
    // æ’å…¥æµ‹è¯•æ•°æ®
    const insert = db.prepare('INSERT INTO test_table (name) VALUES (?)');
    insert.run('æµ‹è¯•æ•°æ®');
    
    // æŸ¥è¯¢æ•°æ®
    const rows = db.prepare('SELECT * FROM test_table').all();
    expect(rows).toHaveLength(1);
    expect(rows[0].name).toBe('æµ‹è¯•æ•°æ®');
    
    db.close();
    
    // æ¸…ç†
    const fs = require('fs');
    fs.unlinkSync(dbPath);
  });

  test('macOSæƒé™å’Œå®‰å…¨æ£€æŸ¥', async () => {
    const fs = require('fs/promises');
    const path = require('path');
    
    // æ£€æŸ¥uploadsç›®å½•æƒé™
    const uploadsDir = path.join(__dirname, '../../uploads');
    
    try {
      await fs.access(uploadsDir, fs.constants.R_OK | fs.constants.W_OK);
    } catch (error) {
      // å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºå®ƒ
      await fs.mkdir(uploadsDir, { recursive: true });
    }
    
    // æµ‹è¯•æ–‡ä»¶è¯»å†™æƒé™
    const testFile = path.join(uploadsDir, 'permission_test.txt');
    await fs.writeFile(testFile, 'permission test');
    const content = await fs.readFile(testFile, 'utf8');
    
    expect(content).toBe('permission test');
    
    await fs.unlink(testFile);
  });
});
```

### 6.2 å®‰å…¨æµ‹è¯• (ClaudeååŠ©)

```javascript
// Claudeç”Ÿæˆçš„å®‰å…¨æµ‹è¯•
describe('å®‰å…¨æµ‹è¯•', () => {
  test('JWT Tokenå®‰å…¨æ€§', () => {
    const jwt = require('jsonwebtoken');
    const secret = process.env.JWT_SECRET || 'test-secret';
    
    // æµ‹è¯•Tokenç”Ÿæˆå’ŒéªŒè¯
    const payload = { userId: 1, role: 'user' };
    const token = jwt.sign(payload, secret, { expiresIn: '1h' });
    
    const decoded = jwt.verify(token, secret);
    expect(decoded.userId).toBe(1);
    expect(decoded.role).toBe('user');
  });

  test('å¯†ç åŠ å¯†å®‰å…¨æ€§', async () => {
    const bcrypt = require('bcryptjs');
    
    const password = 'testPassword123';
    const hashedPassword = await bcrypt.hash(password, 10);
    
    // éªŒè¯å¯†ç ä¸æ˜¯æ˜æ–‡å­˜å‚¨
    expect(hashedPassword).not.toBe(password);
    expect(hashedPassword.length).toBeGreaterThan(50);
    
    // éªŒè¯å¯†ç æ ¡éªŒåŠŸèƒ½
    const isValid = await bcrypt.compare(password, hashedPassword);
    expect(isValid).toBe(true);
    
    const isInvalid = await bcrypt.compare('wrongPassword', hashedPassword);
    expect(isInvalid).toBe(false);
  });

  test('æ–‡ä»¶ä¸Šä¼ å®‰å…¨æ£€æŸ¥', () => {
    const path = require('path');
    
    // æµ‹è¯•æ–‡ä»¶ç±»å‹éªŒè¯
    const allowedTypes = ['.pdf', '.doc', '.docx', '.txt', '.png', '.jpg'];
    
    const testFiles = [
      'document.pdf',
      'image.jpg',
      'script.js',  // ä¸å®‰å…¨
      'executable.exe',  // ä¸å®‰å…¨
      '../../../etc/passwd'  // è·¯å¾„éå†æ”»å‡»
    ];
    
    testFiles.forEach(filename => {
      const ext = path.extname(filename).toLowerCase();
      const isValid = allowedTypes.includes(ext) && !filename.includes('..');
      
      if (filename === 'document.pdf' || filename === 'image.jpg') {
        expect(isValid).toBe(true);
      } else {
        expect(isValid).toBe(false);
      }
    });
  });

  test('SQLæ³¨å…¥é˜²æŠ¤', async () => {
    const { DatabaseManager } = require('../database/DatabaseManager');
    const db = DatabaseManager.getInstance();
    
    // æµ‹è¯•å‚æ•°åŒ–æŸ¥è¯¢
    const maliciousInput = "'; DROP TABLE documents; --";
    
    try {
      // ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼Œåº”è¯¥å®‰å…¨
      const result = await db.all(
        'SELECT * FROM documents WHERE title = ?',
        [maliciousInput]
      );
      
      // æŸ¥è¯¢åº”è¯¥æˆåŠŸæ‰§è¡Œï¼ˆè¿”å›ç©ºç»“æœï¼‰ï¼Œè€Œä¸æ˜¯ç ´åæ•°æ®åº“
      expect(Array.isArray(result)).toBe(true);
      
      // éªŒè¯documentsè¡¨ä»ç„¶å­˜åœ¨
      const tableCheck = await db.all(
        "SELECT name FROM sqlite_master WHERE type='table' AND name='documents'"
      );
      expect(tableCheck).toHaveLength(1);
      
    } catch (error) {
      // å¦‚æœå‡ºé”™ï¼Œç¡®ä¿ä¸æ˜¯å› ä¸ºSQLæ³¨å…¥æˆåŠŸ
      expect(error.message).not.toContain('no such table: documents');
    }
  });

  test('XSSé˜²æŠ¤æ£€æŸ¥', () => {
    const validator = require('validator');
    
    const maliciousInputs = [
      '<script>alert("XSS")</script>',
      'javascript:alert("XSS")',
      '<img src="x" onerror="alert(\'XSS\')">',
      '"><script>alert("XSS")</script>'
    ];
    
    maliciousInputs.forEach(input => {
      // æµ‹è¯•HTMLå®ä½“ç¼–ç 
      const escaped = validator.escape(input);
      expect(escaped).not.toContain('<script>');
      expect(escaped).not.toContain('javascript:');
      expect(escaped).not.toContain('onerror=');
    });
  });
});
```

## 7. Claude AI æµ‹è¯•æ‰§è¡Œè®¡åˆ’

### 7.1 æ¯å‘¨æµ‹è¯•è®¡åˆ’ (ä¸å¼€å‘è®¡åˆ’åŒæ­¥)

#### Week 1: åŸºç¡€æ¡†æ¶æµ‹è¯• (2025.09.13-09.19)
**Claude AI ååŠ©ä»»åŠ¡**:
- ç”Ÿæˆç”¨æˆ·è®¤è¯æ¨¡å—çš„å®Œæ•´æµ‹è¯•å¥—ä»¶
- åˆ›å»ºæ•°æ®åº“æ“ä½œçš„å•å…ƒæµ‹è¯•
- ç”ŸæˆAPIæ¥å£çš„é›†æˆæµ‹è¯•
- è®¾ç½®æœ¬åœ°æµ‹è¯•ç¯å¢ƒå’ŒCIé…ç½®

**æµ‹è¯•ç›®æ ‡**:
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°80%
- æ‰€æœ‰è®¤è¯APIé›†æˆæµ‹è¯•é€šè¿‡
- æ•°æ®åº“CRUDæ“ä½œéªŒè¯å®Œæˆ

#### Week 2: æ ¸å¿ƒåŠŸèƒ½æµ‹è¯• (2025.09.20-09.26)
**Claude AI ååŠ©ä»»åŠ¡**:
- ç”Ÿæˆæ–‡æ¡£ä¸Šä¼ åŠŸèƒ½çš„å®Œæ•´æµ‹è¯•
- åˆ›å»ºæ–‡ä»¶å¤„ç†å’Œå­˜å‚¨çš„æµ‹è¯•ç”¨ä¾‹
- ç”Ÿæˆå‰ç«¯ç»„ä»¶çš„æ¸²æŸ“æµ‹è¯•
- è®¾ç½®ç«¯åˆ°ç«¯æµ‹è¯•æ¡†æ¶

**æµ‹è¯•ç›®æ ‡**:
- æ–‡æ¡£ç®¡ç†æ¨¡å—æµ‹è¯•è¦†ç›–ç‡90%
- æ–‡ä»¶ä¸Šä¼ ä¸‹è½½åŠŸèƒ½éªŒè¯å®Œæˆ
- å‰ç«¯ç•Œé¢äº¤äº’æµ‹è¯•é€šè¿‡

#### Week 3: é«˜çº§åŠŸèƒ½æµ‹è¯• (2025.09.27-10.03)
**Claude AI ååŠ©ä»»åŠ¡**:
- ç”Ÿæˆæœç´¢åŠŸèƒ½çš„æ€§èƒ½æµ‹è¯•
- åˆ›å»ºæ ‡ç­¾ç³»ç»Ÿçš„å®Œæ•´æµ‹è¯•å¥—ä»¶
- ç”Ÿæˆæƒé™æ§åˆ¶çš„å®‰å…¨æµ‹è¯•
- è®¾ç½®æ€§èƒ½ç›‘æ§å’ŒæŠ¥å‘Š

**æµ‹è¯•ç›®æ ‡**:
- æœç´¢æ€§èƒ½è¾¾åˆ°< 1ç§’å“åº”
- æ ‡ç­¾åŠŸèƒ½æµ‹è¯•è¦†ç›–ç‡95%
- æƒé™æ§åˆ¶å®‰å…¨éªŒè¯é€šè¿‡

#### Week 4: å®Œæ•´æ€§æµ‹è¯• (2025.10.04-10.10)
**Claude AI ååŠ©ä»»åŠ¡**:
- ç”Ÿæˆå®Œæ•´ç³»ç»Ÿçš„å›å½’æµ‹è¯•
- åˆ›å»ºç”¨æˆ·ä½“éªŒçš„E2Eæµ‹è¯•åœºæ™¯
- ç”Ÿæˆæ€§èƒ½ä¼˜åŒ–æµ‹è¯•æŠ¥å‘Š
- è®¾ç½®ç”Ÿäº§ç¯å¢ƒéªŒè¯æµ‹è¯•

**æµ‹è¯•ç›®æ ‡**:
- æ‰€æœ‰åŠŸèƒ½å›å½’æµ‹è¯•é€šè¿‡
- ç”¨æˆ·æµç¨‹E2Eæµ‹è¯•å®Œæˆ
- æ€§èƒ½æŒ‡æ ‡è¾¾åˆ°é¢„æœŸç›®æ ‡

### 7.2 æ¯æ—¥æµ‹è¯•æ‰§è¡Œæµç¨‹

#### Claude AI ååŠ©çš„æ¯æ—¥æµ‹è¯•æµç¨‹
```bash
# 1. æ¯æ—¥æµ‹è¯•å¼€å§‹å‰å’¨è¯¢Claude
# "è¯·ä¸ºä»Šå¤©çš„å¼€å‘ä»»åŠ¡ç”Ÿæˆç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹"

# 2. æ‰§è¡ŒClaudeç”Ÿæˆçš„æµ‹è¯•
npm run test:unit
npm run test:integration  
npm run test:e2e

# 3. æ”¶é›†æµ‹è¯•ç»“æœ
npm run test:coverage

# 4. å‘Claudeåé¦ˆæµ‹è¯•ç»“æœ
# "ä»¥ä¸‹æµ‹è¯•å¤±è´¥ï¼Œè¯·åˆ†æåŸå› å¹¶æä¾›è§£å†³æ–¹æ¡ˆï¼š[é”™è¯¯ä¿¡æ¯]"

# 5. åº”ç”¨Claudeå»ºè®®çš„ä¿®å¤æ–¹æ¡ˆ
# ä¿®å¤ä»£ç æˆ–æ›´æ–°æµ‹è¯•

# 6. é‡æ–°è¿è¡Œæµ‹è¯•éªŒè¯
npm run test:regression
```

### 7.3 æµ‹è¯•è‡ªåŠ¨åŒ–å·¥å…·é…ç½®

#### Package.json æµ‹è¯•è„šæœ¬ (Claudeç”Ÿæˆ)
```json
{
  "scripts": {
    "test": "jest",
    "test:unit": "jest --testPathPattern=unit",
    "test:integration": "jest --testPathPattern=integration",
    "test:e2e": "playwright test",
    "test:coverage": "jest --coverage",
    "test:watch": "jest --watch",
    "test:performance": "artillery run performance-test.yml",
    "test:security": "npm audit && snyk test",
    "test:all": "npm run test:unit && npm run test:integration && npm run test:e2e",
    "test:regression": "npm run test:all && npm run test:performance"
  }
}
```

## 8. Claude AI æµ‹è¯•æŠ¥å‘Šå’Œåˆ†æ

### 8.1 æ¯æ—¥æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
# çŸ¥è¯†åº“ç®¡ç†å·¥å…· - æ¯æ—¥æµ‹è¯•æŠ¥å‘Š (Claude AI ååŠ©)

**æ—¥æœŸ**: 2025-09-XX  
**æµ‹è¯•æ‰§è¡Œ**: Claude AI ç”Ÿæˆ + æœ¬åœ°è‡ªåŠ¨åŒ–æ‰§è¡Œ  
**æŠ¥å‘Šç”Ÿæˆ**: Claude AI ååŠ©åˆ†æ

## ä»Šæ—¥æµ‹è¯•æ¦‚å†µ
- **å•å…ƒæµ‹è¯•**: 95/100 é€šè¿‡ (95%)
- **é›†æˆæµ‹è¯•**: 18/20 é€šè¿‡ (90%)  
- **E2Eæµ‹è¯•**: 8/10 é€šè¿‡ (80%)
- **è¦†ç›–ç‡**: 87% (ç›®æ ‡: 85%)

## Claude AI ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹
âœ… **æ–°å¢ç”¨æˆ·æ³¨å†ŒéªŒè¯æµ‹è¯•** (10ä¸ªç”¨ä¾‹)
âœ… **æ–‡æ¡£ä¸Šä¼ å®‰å…¨æ£€æŸ¥æµ‹è¯•** (8ä¸ªç”¨ä¾‹)
ğŸ”„ **æƒé™æ§åˆ¶è¾¹ç•Œæµ‹è¯•** (5ä¸ªç”¨ä¾‹) - è¿›è¡Œä¸­

## å‘ç°çš„é—®é¢˜
ğŸ› **[TEST-001]** æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶éªŒè¯å¤±è´¥
- **Claudeåˆ†æ**: å‰ç«¯éªŒè¯ä¸åç«¯ä¸ä¸€è‡´
- **å»ºè®®æ–¹æ¡ˆ**: ç»Ÿä¸€å‰åç«¯æ–‡ä»¶å¤§å°é…ç½®
- **çŠ¶æ€**: å·²ä¿®å¤ï¼Œç­‰å¾…éªŒè¯

ğŸ› **[TEST-002]** æœç´¢ç»“æœåˆ†é¡µæ˜¾ç¤ºå¼‚å¸¸  
- **Claudeåˆ†æ**: SQLæŸ¥è¯¢OFFSETè®¡ç®—é”™è¯¯
- **å»ºè®®æ–¹æ¡ˆ**: ä¿®æ­£åˆ†é¡µç®—æ³•ï¼Œæ·»åŠ è¾¹ç•Œæ£€æŸ¥
- **çŠ¶æ€**: ä¿®å¤ä¸­

## æ€§èƒ½æµ‹è¯•ç»“æœ
- **APIå“åº”æ—¶é—´**: å¹³å‡456ms (âœ… < 1s)
- **é¡µé¢åŠ è½½æ—¶é—´**: å¹³å‡1.2s (âœ… < 2s)  
- **æœç´¢å“åº”**: å¹³å‡890ms (âœ… < 1s)
- **æ–‡ä»¶ä¸Šä¼ **: 5MBæ–‡ä»¶è€—æ—¶3.2s (âœ… < 10s)

## æ˜æ—¥æµ‹è¯•è®¡åˆ’
ğŸ“‹ å®Œæˆæƒé™æ§åˆ¶è¾¹ç•Œæµ‹è¯•  
ğŸ“‹ æ‰§è¡ŒClaudeç”Ÿæˆçš„æ ‡ç­¾ç³»ç»Ÿæµ‹è¯•  
ğŸ“‹ éªŒè¯ä»Šæ—¥ä¿®å¤çš„é—®é¢˜  
ğŸ“‹ å¼€å§‹é«˜çº§æœç´¢åŠŸèƒ½æµ‹è¯•

## Claude AI å»ºè®®
ğŸ’¡ **æµ‹è¯•ä¼˜åŒ–å»ºè®®**:
- å¢åŠ æ–‡ä»¶ç±»å‹éªŒè¯çš„è¾¹ç•Œæµ‹è¯•
- è¡¥å……å¼‚å¸¸ç½‘ç»œæƒ…å†µä¸‹çš„å‰ç«¯æµ‹è¯•
- æ·»åŠ å¤§æ•°æ®é‡æƒ…å†µä¸‹çš„æ€§èƒ½æµ‹è¯•

âš ï¸ **é£é™©æé†’**:
- æœç´¢åŠŸèƒ½åœ¨æ•°æ®é‡å¢å¤§æ—¶å¯èƒ½å‡ºç°æ€§èƒ½é—®é¢˜
- å»ºè®®æå‰å‡†å¤‡æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–æ–¹æ¡ˆ
```

### 8.2 æµ‹è¯•è´¨é‡åº¦é‡

#### Claude AI ååŠ©çš„æµ‹è¯•æŒ‡æ ‡åˆ†æ
```javascript
// Claudeç”Ÿæˆçš„æµ‹è¯•è´¨é‡åˆ†æè„šæœ¬
const fs = require('fs');
const path = require('path');

class TestQualityAnalyzer {
  constructor() {
    this.testResults = {};
    this.coverageData = {};
  }

  // åˆ†ææµ‹è¯•è¦†ç›–ç‡è¶‹åŠ¿
  analyzeCoverageTrend() {
    const weeklyData = [
      { week: 1, coverage: 75 },
      { week: 2, coverage: 82 },
      { week: 3, coverage: 87 },
      { week: 4, coverage: 91 }
    ];

    const trend = this.calculateTrend(weeklyData);
    
    return {
      currentCoverage: 91,
      targetCoverage: 85,
      trend: trend > 0 ? 'ä¸Šå‡' : 'ä¸‹é™',
      weeklyIncrease: trend,
      status: trend > 0 ? 'è‰¯å¥½' : 'éœ€å…³æ³¨'
    };
  }

  // åˆ†ææµ‹è¯•ç”¨ä¾‹è´¨é‡
  analyzeTestCaseQuality() {
    return {
      totalTestCases: 156,
      claudeGeneratedCases: 134, // 86%
      manualCases: 22,
      passRate: 94.2,
      avgExecutionTime: '2.3s',
      flakyTests: 3, // ä¸ç¨³å®šçš„æµ‹è¯•
      maintainabilityScore: 8.7 // 1-10åˆ†
    };
  }

  // åˆ†æç¼ºé™·å‘ç°æ•ˆç‡
  analyzeDefectDetection() {
    return {
      totalDefectsFound: 15,
      criticalDefects: 2,
      majorDefects: 6,
      minorDefects: 7,
      defectDetectionRate: 93.3, // æµ‹è¯•å‘ç°çš„ç¼ºé™·æ¯”ä¾‹
      escapeDefects: 1, // é€ƒé€¸åˆ°ç”Ÿäº§çš„ç¼ºé™·
      avgFixTime: '4.2 hours'
    };
  }

  // ç”ŸæˆClaude AIæµ‹è¯•æ•ˆæœæŠ¥å‘Š
  generateClaudeEffectivenessReport() {
    return {
      testGenerationSpeed: '15 min/module', // Claudeç”Ÿæˆæµ‹è¯•çš„é€Ÿåº¦
      testQualityScore: 9.1, // Claudeç”Ÿæˆæµ‹è¯•çš„è´¨é‡è¯„åˆ†
      coverageImprovement: '+23%', // ç›¸æ¯”æ‰‹å·¥ç¼–å†™çš„è¦†ç›–ç‡æå‡
      bugDetectionRate: '94%', // Claudeæµ‹è¯•çš„ç¼ºé™·å‘ç°ç‡
      falsePositiveRate: '2%', // è¯¯æŠ¥ç‡
      maintenanceCost: 'Low', // ç»´æŠ¤æˆæœ¬
      learningCurve: 'Minimal' // å­¦ä¹ æˆæœ¬
    };
  }

  calculateTrend(data) {
    if (data.length < 2) return 0;
    
    const firstValue = data[0].coverage;
    const lastValue = data[data.length - 1].coverage;
    return ((lastValue - firstValue) / firstValue * 100).toFixed(1);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const analyzer = new TestQualityAnalyzer();
console.log('æµ‹è¯•è¦†ç›–ç‡è¶‹åŠ¿:', analyzer.analyzeCoverageTrend());
console.log('æµ‹è¯•ç”¨ä¾‹è´¨é‡:', analyzer.analyzeTestCaseQuality());
console.log('ç¼ºé™·å‘ç°æ•ˆç‡:', analyzer.analyzeDefectDetection());
console.log('Claude AIæ•ˆæœ:', analyzer.generateClaudeEffectivenessReport());
```

## 9. æµ‹è¯•é£é™©ç®¡ç† (macOSå•æœºç‰ˆ)

### 9.1 å•æœºæµ‹è¯•ç¯å¢ƒé£é™©

#### ç¯å¢ƒé£é™©
1. **macOSç³»ç»Ÿé£é™©**
   - é£é™©ç­‰çº§: ä½
   - å½±å“: macOSç³»ç»Ÿæ›´æ–°å¯èƒ½å½±å“å¼€å‘ç¯å¢ƒ
   - ç¼“è§£æªæ–½: å®šæœŸå¤‡ä»½å¼€å‘ç¯å¢ƒï¼Œå»¶è¿Ÿç³»ç»Ÿæ›´æ–°

2. **æœ¬åœ°æ•°æ®é£é™©**
   - é£é™©ç­‰çº§: ä¸­
   - å½±å“: æµ‹è¯•æ•°æ®å¯èƒ½å› ç³»ç»Ÿé—®é¢˜ä¸¢å¤±
   - ç¼“è§£æªæ–½: æ¯æ—¥å¤‡ä»½æµ‹è¯•æ•°æ®åº“ï¼Œä½¿ç”¨Gitç®¡ç†æµ‹è¯•è„šæœ¬

3. **ClaudeæœåŠ¡ä¾èµ–é£é™©**
   - é£é™©ç­‰çº§: ä¸­
   - å½±å“: ClaudeæœåŠ¡ä¸å¯ç”¨å½±å“æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ
   - ç¼“è§£æªæ–½: é¢„å…ˆç”Ÿæˆæ ¸å¿ƒæµ‹è¯•ç”¨ä¾‹ï¼Œå»ºç«‹æœ¬åœ°æµ‹è¯•åº“

#### æŠ€æœ¯é£é™©
1. **æµ‹è¯•æ¡†æ¶å…¼å®¹æ€§**
   - é£é™©ç­‰çº§: ä½
   - å½±å“: æµ‹è¯•å·¥å…·åœ¨macOSä¸Šå¯èƒ½å‡ºç°å…¼å®¹é—®é¢˜
   - ç¼“è§£æªæ–½: é€‰æ‹©è·¨å¹³å°æµ‹è¯•å·¥å…·ï¼Œæå‰éªŒè¯å…¼å®¹æ€§

2. **Node.jsç‰ˆæœ¬ä¾èµ–**
   - é£é™©ç­‰çº§: ä½
   - å½±å“: Node.jsç‰ˆæœ¬æ›´æ–°å¯èƒ½ç ´åæµ‹è¯•ç¯å¢ƒ
   - ç¼“è§£æªæ–½: ä½¿ç”¨nvmç®¡ç†Node.jsç‰ˆæœ¬ï¼Œé”å®šé¡¹ç›®ä¾èµ–ç‰ˆæœ¬

### 9.2 åº”æ€¥é¢„æ¡ˆ

#### Claude AI æœåŠ¡ä¸­æ–­åº”æ€¥
```bash
# ç´§æ€¥æƒ…å†µä¸‹çš„æœ¬åœ°æµ‹è¯•æ‰§è¡Œè®¡åˆ’

# 1. ä½¿ç”¨é¢„ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹
npm run test:pre-generated

# 2. æ‰§è¡Œæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
npm run test:core-features

# 3. æ‰‹åŠ¨æ‰§è¡Œå…³é”®è·¯å¾„æµ‹è¯•
./scripts/manual-critical-tests.sh

# 4. ç”Ÿæˆç®€åŒ–æµ‹è¯•æŠ¥å‘Š
npm run test:basic-report
```

#### æµ‹è¯•ç¯å¢ƒæ•…éšœæ¢å¤
```bash
# æµ‹è¯•ç¯å¢ƒæ¢å¤è„šæœ¬ (Claudeé¢„ç”Ÿæˆ)

#!/bin/bash
echo "å¼€å§‹æ¢å¤æµ‹è¯•ç¯å¢ƒ..."

# 1. æ£€æŸ¥Node.jsç¯å¢ƒ
node --version || echo "è­¦å‘Š: Node.jsæœªå®‰è£…æˆ–ç‰ˆæœ¬å¼‚å¸¸"

# 2. é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules package-lock.json
npm install

# 3. é‡å»ºæµ‹è¯•æ•°æ®åº“
npm run db:reset
npm run db:seed

# 4. éªŒè¯æµ‹è¯•ç¯å¢ƒ
npm run test:smoke

echo "æµ‹è¯•ç¯å¢ƒæ¢å¤å®Œæˆ"
```

## 10. æµ‹è¯•å®Œæˆæ ‡å‡† (macOSå•æœºç‰ˆ)

### 10.1 åŠŸèƒ½æµ‹è¯•å®Œæˆæ ‡å‡†

#### åŸºç¡€åŠŸèƒ½éªŒæ”¶
- [ ] ç”¨æˆ·è®¤è¯åŠŸèƒ½æµ‹è¯•é€šè¿‡ç‡ 100%
- [ ] æ–‡æ¡£ç®¡ç†CRUDæ“ä½œæµ‹è¯•é€šè¿‡ç‡ 100%
- [ ] æœç´¢åŠŸèƒ½åœ¨æœ¬åœ°ç¯å¢ƒå“åº”æ—¶é—´ < 1ç§’
- [ ] æ–‡ä»¶ä¸Šä¼ ä¸‹è½½åŠŸèƒ½åœ¨macOSç¯å¢ƒæ­£å¸¸å·¥ä½œ
- [ ] æ ‡ç­¾ç®¡ç†åŠŸèƒ½æµ‹è¯•è¦†ç›–ç‡ > 90%

#### è´¨é‡æ ‡å‡†
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 85%
- [ ] é›†æˆæµ‹è¯•è¦†ç›–ç‡ â‰¥ 75%
- [ ] E2Eæµ‹è¯•è¦†ç›–æ ¸å¿ƒç”¨æˆ·æµç¨‹ â‰¥ 80%
- [ ] Claudeç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹è´¨é‡è¯„åˆ† â‰¥ 9.0
- [ ] æ‰€æœ‰ä¸¥é‡ç¼ºé™·ä¿®å¤å®Œæˆ

#### æ€§èƒ½æ ‡å‡†
- [ ] æœ¬åœ°ç¯å¢ƒé¡µé¢åŠ è½½æ—¶é—´ < 2ç§’
- [ ] APIæ¥å£å“åº”æ—¶é—´ < 1ç§’
- [ ] SQLiteæ•°æ®åº“æŸ¥è¯¢æ€§èƒ½æ»¡è¶³è¦æ±‚
- [ ] å†…å­˜ä½¿ç”¨ç‡åœ¨æ­£å¸¸èŒƒå›´å†…

### 10.2 macOSå…¼å®¹æ€§éªŒæ”¶

#### ç³»ç»Ÿå…¼å®¹æ€§
- [ ] åœ¨macOS 11.7.10ä¸Šæ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ
- [ ] ä¸­æ–‡æ–‡ä»¶åå’Œè·¯å¾„å¤„ç†æ­£ç¡®
- [ ] æœ¬åœ°æ–‡ä»¶å­˜å‚¨å’Œè®¿é—®æƒé™æ­£å¸¸
- [ ] SQLiteæ•°æ®åº“åœ¨macOSä¸Šæ€§èƒ½ç¨³å®š

#### å¼€å‘ç¯å¢ƒå…¼å®¹æ€§
- [ ] VS Codeå¼€å‘å’Œè°ƒè¯•æ­£å¸¸
- [ ] Node.jså’Œnpmåœ¨macOSä¸Šè¿è¡Œç¨³å®š
- [ ] æ‰€æœ‰æµ‹è¯•æ¡†æ¶å’Œå·¥å…·æ­£å¸¸å·¥ä½œ
- [ ] Gitç‰ˆæœ¬æ§åˆ¶æ“ä½œæ— å¼‚å¸¸

### 10.3 Claude AI ååŠ©æ•ˆæœéªŒæ”¶

#### AIååŠ©è´¨é‡
- [ ] Claudeç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹å‡†ç¡®æ€§ â‰¥ 95%
- [ ] æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆé€Ÿåº¦æ»¡è¶³å¼€å‘èŠ‚å¥
- [ ] é—®é¢˜è¯Šæ–­å’Œè§£å†³æ–¹æ¡ˆæœ‰æ•ˆæ€§ â‰¥ 90%
- [ ] æµ‹è¯•ç­–ç•¥ä¼˜åŒ–å»ºè®®è¢«é‡‡çº³ç‡ â‰¥ 80%

#### å¼€å‘æ•ˆç‡æå‡
- [ ] æµ‹è¯•å¼€å‘æ—¶é—´ç›¸æ¯”ä¼ ç»Ÿæ–¹å¼èŠ‚çœ â‰¥ 60%
- [ ] æµ‹è¯•è¦†ç›–ç‡ç›¸æ¯”æ‰‹å·¥ç¼–å†™æå‡ â‰¥ 20%
- [ ] ç¼ºé™·å‘ç°ç‡æå‡ â‰¥ 15%
- [ ] æµ‹è¯•ç»´æŠ¤æˆæœ¬é™ä½ â‰¥ 40%

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0 (macOS 11.7.10 Claude AI è‡ªåŠ¨æµ‹è¯•ç‰ˆ)  
**åˆ›å»ºæ—¶é—´**: 2025-09-13  
**æµ‹è¯•å¹³å°**: macOS 11.7.10  
**æµ‹è¯•æ¨¡å¼**: Claude AI ååŠ©çš„å•æœºè‡ªåŠ¨åŒ–æµ‹è¯•  
**é¡¹ç›®ä½ç½®**: `/Users/weichen/Documents/testClass`